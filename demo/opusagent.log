2025-06-05 15:59:43,268 - call_recorder - INFO - Logging configured
2025-06-05 15:59:43,268 - telephony_realtime_bridge - INFO - Logging configured
2025-06-05 15:59:44,228 - twilio_realtime_bridge - INFO - Logging configured
2025-06-05 16:00:16,772 - call_recorder - INFO - Logging configured
2025-06-05 16:00:16,787 - telephony_realtime_bridge - INFO - Logging configured
2025-06-05 16:00:17,744 - twilio_realtime_bridge - INFO - Logging configured
2025-06-05 16:00:40,882 - run - INFO - Logging configured
2025-06-05 16:00:40,882 - run - INFO - === Server Configuration ===
2025-06-05 16:00:40,882 - run - INFO - Host: 0.0.0.0
2025-06-05 16:00:40,882 - run - INFO - Port: 8000
2025-06-05 16:00:40,882 - run - INFO - Log level: INFO
2025-06-05 16:00:40,882 - run - INFO - Environment: production
2025-06-05 16:00:40,882 - run - INFO - OpenAI API key configured: True
2025-06-05 16:00:40,882 - run - INFO - OpenAI API key format: Valid
2025-06-05 16:00:40,882 - run - INFO - =========================
2025-06-05 16:00:40,882 - run - INFO - Starting server with uvicorn...
2025-06-05 16:00:41,455 - call_recorder - INFO - Logging configured
2025-06-05 16:00:41,455 - telephony_realtime_bridge - INFO - Logging configured
2025-06-05 16:00:41,466 - main - INFO - Logging configured
2025-06-05 16:00:50,310 - multi_turn_test - INFO - Logging configured
2025-06-05 16:00:50,310 - multi_turn_test - INFO - [MAIN] Multi-Turn Conversation Test Tool
2025-06-05 16:00:50,310 - multi_turn_test - INFO - ==================================================
2025-06-05 16:00:50,310 - multi_turn_test - INFO - [MAIN] Running replacement card conversation flow
2025-06-05 16:00:50,310 - multi_turn_test - INFO - [TEST] Starting ReplacementCardConversation
2025-06-05 16:00:50,310 - multi_turn_test - INFO - ==================================================
2025-06-05 16:00:50,310 - multi_turn_test - INFO - [TEST] Using 5 audio files:
2025-06-05 16:00:50,310 - multi_turn_test - INFO -    1. need_to_replace_card.wav
2025-06-05 16:00:50,310 - multi_turn_test - INFO -    2. my_gold_card.wav
2025-06-05 16:00:50,310 - multi_turn_test - INFO -    3. i_lost_it.wav
2025-06-05 16:00:50,310 - multi_turn_test - INFO -    4. yes_that_address.wav
2025-06-05 16:00:50,310 - multi_turn_test - INFO -    5. thanks_thats_all.wav
2025-06-05 16:00:50,310 - multi_turn_test - INFO - [MOCK] Connecting to bridge at ws://localhost:8000/voice-bot...
2025-06-05 16:00:52,383 - main - INFO - ------ Incoming telephony connection from Address(host='127.0.0.1', port=51711) ------
2025-06-05 16:00:52,384 - main - INFO - ------ Telephony connection accepted from Address(host='127.0.0.1', port=51711) ------
2025-06-05 16:00:52,384 - main - INFO - Attempting to connect to OpenAI Realtime API...
2025-06-05 16:00:52,390 - multi_turn_test - INFO - [MOCK] Connected to bridge server
2025-06-05 16:00:52,391 - multi_turn_test - INFO - [MOCK] Sent session.initiate for conversation: 8494a38b-64e6-4bf0-ab89-6dfa4fbf755e
2025-06-05 16:00:53,000 - main - INFO - OpenAI WebSocket connection established
2025-06-05 16:00:53,001 - main - INFO - Telephony-Realtime bridge created
2025-06-05 16:00:53,002 - main - INFO - Initializing realtime-websocket session...
2025-06-05 16:00:53,002 - telephony_realtime_bridge - INFO - Sending session update: {"type":"session.update","event_id":null,"session":{"modalities":["text","audio"],"model":"gpt-4o-realtime-preview-2024-10-01","instructions":"You are a customer service agent for Bank of Peril. You help customers with their banking needs. When a customer contacts you, first greet them warmly, then listen to their request and call the call_intent function to identify their intent. After calling call_intent, use the function result to guide your response:\n- If intent is 'card_replacement', ask which type of card they need to replace (use the available_cards from the function result)\n- If intent is 'account_inquiry', ask what specific account information they need\n- For other intents, ask clarifying questions to better understand their needs\nAlways be helpful, professional, and use the information returned by functions to provide relevant follow-up questions.","voice":"alloy","input_audio_format":"pcm16","output_audio_format":"pcm16","turn_detection":null,"tools":[{"type":"function","name":"get_balance","description":"Get the user's account balance.","parameters":{"type":"object","properties":{}}},{"type":"function","name":"transfer_funds","description":"Transfer funds to another account.","parameters":{"type":"object","properties":{"amount":{"type":"number"},"to_account":{"type":"string"}}}},{"type":"function","name":"transfer_to_human","description":"Transfer the conversation to a human agent.","parameters":{"type":"object","properties":{"reason":{"type":"string","description":"The reason for transferring to a human agent"},"priority":{"type":"string","enum":["low","normal","high"],"description":"The priority level of the transfer"},"context":{"type":"object","description":"Additional context to pass to the human agent"}},"required":["reason"]}},{"type":"function","name":"call_intent","description":"Get the user's intent.","parameters":{"type":"object","properties":{"intent":{"type":"string","enum":["card_replacement","account_inquiry","other"]}},"required":["intent"]}},{"type":"function","name":"member_account_confirmation","description":"Confirm which member account/card needs replacement.","parameters":{"type":"object","properties":{"member_accounts":{"type":"array","items":{"type":"string"},"description":"List of available member accounts/cards"},"organization_name":{"type":"string"}}}},{"type":"function","name":"replacement_reason","description":"Collect the reason for card replacement.","parameters":{"type":"object","properties":{"card_in_context":{"type":"string"},"reason":{"type":"string","enum":["Lost","Damaged","Stolen","Other"]}}}},{"type":"function","name":"confirm_address","description":"Confirm the address for card delivery.","parameters":{"type":"object","properties":{"card_in_context":{"type":"string"},"address_on_file":{"type":"string"},"confirmed_address":{"type":"string"}}}},{"type":"function","name":"start_card_replacement","description":"Start the card replacement process.","parameters":{"type":"object","properties":{"card_in_context":{"type":"string"},"address_in_context":{"type":"string"}}}},{"type":"function","name":"finish_card_replacement","description":"Finish the card replacement process and provide delivery information.","parameters":{"type":"object","properties":{"card_in_context":{"type":"string"},"address_in_context":{"type":"string"},"delivery_time":{"type":"string"}}}},{"type":"function","name":"wrap_up","description":"Wrap up the call with closing remarks.","parameters":{"type":"object","properties":{"organization_name":{"type":"string"}}}}],"tool_choice":"auto","temperature":0.8,"max_response_output_tokens":4096,"input_audio_transcription":{"model":"whisper-1"},"input_audio_noise_reduction":{"type":"near_field"}}}
2025-06-05 16:00:53,003 - main - INFO - realtime-websocket session initialized
2025-06-05 16:00:53,003 - main - INFO - Starting bridge tasks...
2025-06-05 16:00:53,004 - telephony_realtime_bridge - INFO - Received telephony message: session.initiate
2025-06-05 16:00:53,004 - telephony_realtime_bridge - INFO - Session initiate received: {'type': 'session.initiate', 'conversationId': '8494a38b-64e6-4bf0-ab89-6dfa4fbf755e', 'expectAudioMessages': True, 'botName': 'ReplacementCardConversationBot', 'caller': '+15551234567', 'supportedMediaFormats': ['raw/lpcm16']}
2025-06-05 16:00:53,005 - telephony_realtime_bridge - INFO - Conversation started: 8494a38b-64e6-4bf0-ab89-6dfa4fbf755e
2025-06-05 16:00:53,005 - call_recorder - INFO - CallRecorder initialized for conversation 8494a38b-64e6-4bf0-ab89-6dfa4fbf755e
2025-06-05 16:00:53,006 - call_recorder - INFO - Recording directory: call_recordings\8494a38b-64e6-4bf0-ab89-6dfa4fbf755e_20250605_160053
2025-06-05 16:00:53,006 - call_recorder - INFO - Audio settings - Caller: 16000Hz, Bot: 24000Hz, Target: 16000Hz
2025-06-05 16:00:53,007 - call_recorder - INFO - WAV files initialized for recording
2025-06-05 16:00:53,008 - call_recorder - INFO - Recording started for conversation 8494a38b-64e6-4bf0-ab89-6dfa4fbf755e
2025-06-05 16:00:53,008 - telephony_realtime_bridge - INFO - Call recording started for conversation: 8494a38b-64e6-4bf0-ab89-6dfa4fbf755e
2025-06-05 16:00:53,009 - telephony_realtime_bridge - INFO - Session accepted with format: raw/lpcm16
2025-06-05 16:00:53,009 - multi_turn_test - INFO - [MOCK] Received from bridge: session.accepted
2025-06-05 16:00:53,009 - telephony_realtime_bridge - INFO - Received OpenAI message type: session.created
2025-06-05 16:00:53,009 - telephony_realtime_bridge - INFO - Session created successfully
2025-06-05 16:00:53,009 - multi_turn_test - INFO - [MOCK] Session accepted with format: raw/lpcm16
2025-06-05 16:00:53,010 - telephony_realtime_bridge - INFO - Attempting to send initial conversation item...
2025-06-05 16:00:53,010 - telephony_realtime_bridge - INFO - Sending initial conversation item: {"type": "conversation.item.create", "item": {"type": "message", "role": "user", "content": [{"type": "input_text", "text": "You are a customer service agent for Bank of Peril. You are given a task to help the customer with their banking needs. Start by saying 'Hello! How can I help you today?' You will infer the customer's intent from their response and call the call_intent function."}]}}
2025-06-05 16:00:53,050 - multi_turn_test - INFO - [MOCK] Starting multi-turn conversation with 5 turns
2025-06-05 16:00:53,050 - multi_turn_test - INFO - [MOCK] Waiting for initial greeting...
2025-06-05 16:00:53,050 - multi_turn_test - INFO - [MOCK] Waiting for LLM greeting...
2025-06-05 16:00:55,011 - telephony_realtime_bridge - INFO - Sending response create: {"type": "response.create", "response": {"modalities": ["text", "audio"], "output_audio_format": "pcm16", "temperature": 0.8, "max_output_tokens": 4096, "voice": "alloy"}}
2025-06-05 16:00:55,011 - telephony_realtime_bridge - INFO - Initial conversation flow initiated successfully
2025-06-05 16:00:55,011 - telephony_realtime_bridge - INFO - Initial conversation item sent successfully
2025-06-05 16:00:55,011 - telephony_realtime_bridge - INFO - Received OpenAI message type: session.updated
2025-06-05 16:00:55,011 - telephony_realtime_bridge - INFO - Session updated successfully
2025-06-05 16:00:55,011 - telephony_realtime_bridge - INFO - Received OpenAI message type: conversation.item.created
2025-06-05 16:00:55,011 - telephony_realtime_bridge - INFO - Conversation item created
2025-06-05 16:00:55,089 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.created
2025-06-05 16:00:55,089 - telephony_realtime_bridge - INFO - Response event details: {
  "type": "response.created",
  "event_id": "event_BfDrnRfBmkv1oQT8jvNrc",
  "response": {
    "object": "realtime.response",
    "id": "resp_BfDrnbvxyUVRkncb3Zsk1",
    "status": "in_progress",
    "status_details": null,
    "output": [],
    "conversation_id": "conv_BfDrlBNrWFCU1HcoQqgWa",
    "modalities": [
      "audio",
      "text"
    ],
    "voice": "alloy",
    "output_audio_format": "pcm16",
    "temperature": 0.8,
    "max_output_tokens": 4096,
    "usage": null,
    "metadata": null
  }
}
2025-06-05 16:00:55,090 - telephony_realtime_bridge - INFO - Response creation started
2025-06-05 16:00:55,571 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.output_item.added
2025-06-05 16:00:55,571 - telephony_realtime_bridge - INFO - Output item added: {
  "id": "item_BfDrnTGLk6UALbXVthVQM",
  "object": "realtime.item",
  "type": "message",
  "status": "in_progress",
  "role": "assistant",
  "content": []
}
2025-06-05 16:00:55,571 - telephony_realtime_bridge - INFO - Output item added: {'id': 'item_BfDrnTGLk6UALbXVthVQM', 'object': 'realtime.item', 'type': 'message', 'status': 'in_progress', 'role': 'assistant', 'content': []}
2025-06-05 16:00:55,571 - telephony_realtime_bridge - INFO - Received OpenAI message type: conversation.item.created
2025-06-05 16:00:55,571 - telephony_realtime_bridge - INFO - Conversation item created
2025-06-05 16:00:55,587 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.content_part.added
2025-06-05 16:00:55,587 - telephony_realtime_bridge - INFO - Content part added: {
  "type": "audio",
  "transcript": ""
}
2025-06-05 16:00:55,587 - telephony_realtime_bridge - INFO - Content part added: {'type': 'audio', 'transcript': ''}
2025-06-05 16:00:55,587 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:00:55,587 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 5
2025-06-05 16:00:55,587 - telephony_realtime_bridge - DEBUG - Received audio transcript delta: Hello
2025-06-05 16:00:55,607 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:00:55,607 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 1
2025-06-05 16:00:55,607 - telephony_realtime_bridge - DEBUG - Received audio transcript delta: !
2025-06-05 16:00:55,610 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:00:55,610 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 4
2025-06-05 16:00:55,611 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  How
2025-06-05 16:00:55,618 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:00:55,618 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 4
2025-06-05 16:00:55,618 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  can
2025-06-05 16:00:55,627 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:00:55,628 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 2
2025-06-05 16:00:55,628 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  I
2025-06-05 16:00:55,906 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-05 16:00:55,907 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 6400
2025-06-05 16:00:55,908 - telephony_realtime_bridge - INFO - Started play stream: 7b01f2e1-9bce-48ee-9676-2d94b2e7a361
2025-06-05 16:00:55,909 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.start
2025-06-05 16:00:55,909 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 2400 -> 1600 samples, 100.0ms -> 100.0ms
2025-06-05 16:00:55,909 - multi_turn_test - INFO - [MOCK] Play stream started: 7b01f2e1-9bce-48ee-9676-2d94b2e7a361
2025-06-05 16:00:55,910 - multi_turn_test - INFO - [MOCK] Collecting greeting audio...
s (100.0ms @ 24000Hz), Resampled: 3200 bytes (100.0ms @ 16000Hz)
2025-06-05 16:00:55,910 - call_recorder - WARNING - Duration ratio mismatch: got 1.000, expected 0.667. This may indicate incorrect sample rate assumptions.
2025-06-05 16:00:55,911 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 6400 bytes)
2025-06-05 16:00:55,911 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-05 16:00:55,912 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (6400 bytes base64)
2025-06-05 16:00:55,937 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:00:55,937 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 5
2025-06-05 16:00:55,938 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  help
2025-06-05 16:00:55,944 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:00:55,944 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 4
2025-06-05 16:00:55,944 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  you
2025-06-05 16:00:55,952 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:00:55,952 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 6
2025-06-05 16:00:55,953 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  today
2025-06-05 16:00:55,963 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:00:55,963 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 1
2025-06-05 16:00:55,963 - telephony_realtime_bridge - DEBUG - Received audio transcript delta: ?
2025-06-05 16:00:55,972 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-05 16:00:55,972 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 9600
2025-06-05 16:00:55,973 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 3600 -> 2400 samples, 150.0ms -> 150.0ms
2025-06-05 16:00:55,973 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 9600 bytes)
2025-06-05 16:00:55,974 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-05 16:00:55,974 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (9600 bytes base64)
2025-06-05 16:00:56,058 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-05 16:00:56,059 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 16000
2025-06-05 16:00:56,059 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 6000 -> 4000 samples, 250.0ms -> 250.0ms
2025-06-05 16:00:56,060 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 16000 bytes)
2025-06-05 16:00:56,060 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-05 16:00:56,061 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (16000 bytes base64)
2025-06-05 16:00:56,154 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-05 16:00:56,154 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 16000
2025-06-05 16:00:56,155 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 6000 -> 4000 samples, 250.0ms -> 250.0ms
2025-06-05 16:00:56,156 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 16000 bytes)
2025-06-05 16:00:56,157 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-05 16:00:56,157 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (16000 bytes base64)
2025-06-05 16:00:56,202 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-05 16:00:56,202 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 16000
2025-06-05 16:00:56,203 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 6000 -> 4000 samples, 250.0ms -> 250.0ms
2025-06-05 16:00:56,204 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 16000 bytes)
2025-06-05 16:00:56,205 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-05 16:00:56,205 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (16000 bytes base64)
2025-06-05 16:00:56,286 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-05 16:00:56,286 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 16000
2025-06-05 16:00:56,287 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 6000 -> 4000 samples, 250.0ms -> 250.0ms
2025-06-05 16:00:56,288 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 16000 bytes)
2025-06-05 16:00:56,288 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-05 16:00:56,289 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (16000 bytes base64)
2025-06-05 16:00:56,344 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-05 16:00:56,345 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 40664
2025-06-05 16:00:56,346 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 15248 -> 10165 samples, 635.3ms -> 635.3ms
2025-06-05 16:00:56,348 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 40664 bytes)
2025-06-05 16:00:56,348 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-05 16:00:56,349 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (40664 bytes base64)
2025-06-05 16:00:56,356 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.done
2025-06-05 16:00:56,356 - telephony_realtime_bridge - INFO - Audio response completed
2025-06-05 16:00:56,356 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.stop
2025-06-05 16:00:56,356 - telephony_realtime_bridge - INFO - Stopped play stream: 7b01f2e1-9bce-48ee-9676-2d94b2e7a361
2025-06-05 16:00:56,356 - multi_turn_test - INFO - [MOCK] Greeting collected: 7 chunks
2025-06-05 16:00:56,357 - multi_turn_test - INFO - [MOCK] Play stream stopped: 7b01f2e1-9bce-48ee-9676-2d94b2e7a361
2025-06-05 16:00:56,357 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.done
2025-06-05 16:00:56,357 - telephony_realtime_bridge - INFO - Full AI transcript (output audio): Hello! How can I help you today?
2025-06-05 16:00:56,357 - call_recorder - INFO - Transcript added: [bot] Hello! How can I help you today?...
2025-06-05 16:00:56,357 - telephony_realtime_bridge - INFO - Audio transcript completed
2025-06-05 16:00:56,357 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.content_part.done
2025-06-05 16:00:56,358 - telephony_realtime_bridge - INFO - Content part completed
2025-06-05 16:00:56,358 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.output_item.done
2025-06-05 16:00:56,358 - telephony_realtime_bridge - INFO - Output item completed
2025-06-05 16:00:56,373 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.done
2025-06-05 16:00:56,374 - telephony_realtime_bridge - INFO - Response event details: {
  "type": "response.done",
  "event_id": "event_BfDrordMdMklNC67SoWdE",
  "response": {
    "object": "realtime.response",
    "id": "resp_BfDrnbvxyUVRkncb3Zsk1",
    "status": "completed",
    "status_details": null,
    "output": [
      {
        "id": "item_BfDrnTGLk6UALbXVthVQM",
        "object": "realtime.item",
        "type": "message",
        "status": "completed",
        "role": "assistant",
        "content": [
          {
            "type": "audio",
            "transcript": "Hello! How can I help you today?"
          }
        ]
      }
    ],
    "conversation_id": "conv_BfDrlBNrWFCU1HcoQqgWa",
    "modalities": [
      "audio",
      "text"
    ],
    "voice": "alloy",
    "output_audio_format": "pcm16",
    "temperature": 0.8,
    "max_output_tokens": 4096,
    "usage": {
      "total_tokens": 606,
      "input_tokens": 551,
      "output_tokens": 55,
      "input_token_details": {
        "text_tokens": 551,
        "audio_tokens": 0,
        "cached_tokens": 512,
        "cached_tokens_details": {
          "text_tokens": 512,
          "audio_tokens": 0
        }
      },
      "output_token_details": {
        "text_tokens": 19,
        "audio_tokens": 36
      }
    },
    "metadata": null
  }
}
2025-06-05 16:00:56,374 - telephony_realtime_bridge - INFO - Received OpenAI message type: rate_limits.updated
2025-06-05 16:00:56,468 - multi_turn_test - INFO - [MOCK] Greeting received: 7 chunks
2025-06-05 16:00:56,468 - multi_turn_test - INFO - [MOCK] Initial greeting received: 7 chunks
2025-06-05 16:00:56,469 - multi_turn_test - INFO - 
[MOCK] === Turn 1/5 ===
2025-06-05 16:00:56,469 - multi_turn_test - INFO - [MOCK] Sending: need_to_replace_card.wav
2025-06-05 16:00:56,470 - multi_turn_test - INFO - [MOCK] Loading audio: need_to_replace_card.wav
2025-06-05 16:00:56,470 - multi_turn_test - INFO -    Format: 1ch, 16bit, 24000Hz
2025-06-05 16:00:56,879 - multi_turn_test - INFO -    Resampling from 24000Hz to 16000Hz...
2025-06-05 16:00:56,896 - multi_turn_test - INFO -    Split into 2 chunks (~1.60s total)
2025-06-05 16:00:56,896 - multi_turn_test - INFO - [MOCK] Sending user audio: need_to_replace_card.wav (2 chunks)
2025-06-05 16:00:56,897 - telephony_realtime_bridge - INFO - Received telephony message: userStream.start
2025-06-05 16:00:56,898 - telephony_realtime_bridge - INFO - User stream start received: {'type': 'userStream.start', 'conversationId': '8494a38b-64e6-4bf0-ab89-6dfa4fbf755e'}
2025-06-05 16:00:56,898 - telephony_realtime_bridge - INFO - User stream started for conversation: 8494a38b-64e6-4bf0-ab89-6dfa4fbf755e
2025-06-05 16:00:56,898 - multi_turn_test - INFO - [MOCK] Received from bridge: userStream.started
2025-06-05 16:00:56,899 - multi_turn_test - INFO - [MOCK] User stream started
2025-06-05 16:00:57,018 - multi_turn_test - DEBUG - [MOCK] Sent chunk 1/2
2025-06-05 16:00:57,019 - telephony_realtime_bridge - INFO - Received telephony message: userStream.chunk with audio chunk size: 42668 bytes
2025-06-05 16:00:57,020 - telephony_realtime_bridge - DEBUG - Processing audio chunk #1: 32000 -> 32000 bytes (~1000.0ms of audio). Total sent: 32000 bytes
2025-06-05 16:00:57,020 - telephony_realtime_bridge - DEBUG - Sending audio to realtime-websocket (size: 42668 bytes base64)
2025-06-05 16:00:57,048 - multi_turn_test - DEBUG - [MOCK] Sent chunk 2/2
2025-06-05 16:00:57,048 - telephony_realtime_bridge - INFO - Received telephony message: userStream.chunk with audio chunk size: 25600 bytes
2025-06-05 16:00:57,048 - telephony_realtime_bridge - DEBUG - Processing audio chunk #2: 19200 -> 19200 bytes (~600.0ms of audio). Total sent: 51200 bytes
2025-06-05 16:00:57,049 - telephony_realtime_bridge - DEBUG - Sending audio to realtime-websocket (size: 25600 bytes base64)
2025-06-05 16:00:57,076 - telephony_realtime_bridge - INFO - Received telephony message: userStream.stop
2025-06-05 16:00:57,076 - multi_turn_test - INFO - [MOCK] User audio sent successfully
2025-06-05 16:00:57,077 - multi_turn_test - INFO - [MOCK] Turn 1: User audio sent successfully
2025-06-05 16:00:57,077 - telephony_realtime_bridge - INFO - User stream stop received for conversation: 8494a38b-64e6-4bf0-ab89-6dfa4fbf755e
2025-06-05 16:00:57,077 - telephony_realtime_bridge - INFO - Buffer state before commit: 2 chunks, 51200 bytes (~1600.0ms of audio)
2025-06-05 16:00:57,077 - multi_turn_test - INFO - [MOCK] Waiting for LLM response...
2025-06-05 16:00:57,078 - telephony_realtime_bridge - INFO - realtime_websocket_object: <bound method Connection.send of <websockets.asyncio.client.ClientConnection object at 0x0000025C7AF9B410>>
2025-06-05 16:00:57,078 - telephony_realtime_bridge - INFO - Audio buffer committed with 2 chunks (51200 bytes)
2025-06-05 16:00:57,078 - telephony_realtime_bridge - INFO - Audio buffer commit sent: {"type":"input_audio_buffer.commit","event_id":null}
2025-06-05 16:00:57,079 - telephony_realtime_bridge - INFO - Response creation triggered after audio buffer commit
2025-06-05 16:00:57,079 - multi_turn_test - INFO - [MOCK] Received from bridge: userStream.stopped
2025-06-05 16:00:57,079 - multi_turn_test - INFO - [MOCK] User stream stopped
2025-06-05 16:00:57,265 - telephony_realtime_bridge - INFO - Received OpenAI message type: input_audio_buffer.committed
2025-06-05 16:00:57,265 - telephony_realtime_bridge - INFO - Received OpenAI message type: conversation.item.created
2025-06-05 16:00:57,266 - telephony_realtime_bridge - INFO - Conversation item created
2025-06-05 16:00:57,272 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.created
2025-06-05 16:00:57,272 - telephony_realtime_bridge - INFO - Response event details: {
  "type": "response.created",
  "event_id": "event_BfDrpMHjEn65uIykkoJr6",
  "response": {
    "object": "realtime.response",
    "id": "resp_BfDrpOpdp9xE36M8cQSvl",
    "status": "in_progress",
    "status_details": null,
    "output": [],
    "conversation_id": "conv_BfDrlBNrWFCU1HcoQqgWa",
    "modalities": [
      "audio",
      "text"
    ],
    "voice": "alloy",
    "output_audio_format": "pcm16",
    "temperature": 0.8,
    "max_output_tokens": 4096,
    "usage": null,
    "metadata": null
  }
}
2025-06-05 16:00:57,273 - telephony_realtime_bridge - INFO - Response creation started
2025-06-05 16:00:57,638 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.output_item.added
2025-06-05 16:00:57,639 - telephony_realtime_bridge - INFO - Output item added: {
  "id": "item_BfDrp2K87yyBSS1zS0nlh",
  "object": "realtime.item",
  "type": "function_call",
  "status": "in_progress",
  "name": "call_intent",
  "call_id": "call_3M24BIqoLlYjRrpK",
  "arguments": ""
}
2025-06-05 16:00:57,639 - telephony_realtime_bridge - INFO - Output item added: {'id': 'item_BfDrp2K87yyBSS1zS0nlh', 'object': 'realtime.item', 'type': 'function_call', 'status': 'in_progress', 'name': 'call_intent', 'call_id': 'call_3M24BIqoLlYjRrpK', 'arguments': ''}
2025-06-05 16:00:57,640 - telephony_realtime_bridge - INFO - Captured function call: call_intent with call_id: call_3M24BIqoLlYjRrpK
2025-06-05 16:00:57,640 - telephony_realtime_bridge - INFO - Received OpenAI message type: conversation.item.created
2025-06-05 16:00:57,641 - telephony_realtime_bridge - INFO - Conversation item created
2025-06-05 16:00:57,641 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.function_call_arguments.delta
2025-06-05 16:00:57,642 - telephony_realtime_bridge - INFO - 🎯 Routing response.function_call_arguments.delta to handler
2025-06-05 16:00:57,643 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.function_call_arguments.delta
2025-06-05 16:00:57,643 - telephony_realtime_bridge - INFO - 🎯 Routing response.function_call_arguments.delta to handler
2025-06-05 16:00:57,652 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.function_call_arguments.delta
2025-06-05 16:00:57,652 - telephony_realtime_bridge - INFO - 🎯 Routing response.function_call_arguments.delta to handler
2025-06-05 16:00:57,662 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.function_call_arguments.delta
2025-06-05 16:00:57,662 - telephony_realtime_bridge - INFO - 🎯 Routing response.function_call_arguments.delta to handler
2025-06-05 16:00:57,671 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.function_call_arguments.delta
2025-06-05 16:00:57,672 - telephony_realtime_bridge - INFO - 🎯 Routing response.function_call_arguments.delta to handler
2025-06-05 16:00:57,679 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.function_call_arguments.delta
2025-06-05 16:00:57,679 - telephony_realtime_bridge - INFO - 🎯 Routing response.function_call_arguments.delta to handler
2025-06-05 16:00:57,684 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.function_call_arguments.delta
2025-06-05 16:00:57,684 - telephony_realtime_bridge - INFO - 🎯 Routing response.function_call_arguments.delta to handler
2025-06-05 16:00:57,705 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.function_call_arguments.done
2025-06-05 16:00:57,705 - telephony_realtime_bridge - INFO - 🎯 Routing response.function_call_arguments.done to handler
2025-06-05 16:00:57,705 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.output_item.done
2025-06-05 16:00:57,706 - telephony_realtime_bridge - INFO - Output item completed
2025-06-05 16:00:57,706 - call_recorder - INFO - Function call logged: call_intent
2025-06-05 16:00:57,707 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.done
2025-06-05 16:00:57,707 - telephony_realtime_bridge - INFO - Response event details: {
  "type": "response.done",
  "event_id": "event_BfDrqXZ1ewF4gkFvqBcOe",
  "response": {
    "object": "realtime.response",
    "id": "resp_BfDrpOpdp9xE36M8cQSvl",
    "status": "completed",
    "status_details": null,
    "output": [
      {
        "id": "item_BfDrp2K87yyBSS1zS0nlh",
        "object": "realtime.item",
        "type": "function_call",
        "status": "completed",
        "name": "call_intent",
        "call_id": "call_3M24BIqoLlYjRrpK",
        "arguments": "{\"intent\":\"card_replacement\"}"
      }
    ],
    "conversation_id": "conv_BfDrlBNrWFCU1HcoQqgWa",
    "modalities": [
      "audio",
      "text"
    ],
    "voice": "alloy",
    "output_audio_format": "pcm16",
    "temperature": 0.8,
    "max_output_tokens": 4096,
    "usage": {
      "total_tokens": 644,
      "input_tokens": 626,
      "output_tokens": 18,
      "input_token_details": {
        "text_tokens": 580,
        "audio_tokens": 46,
        "cached_tokens": 512,
        "cached_tokens_details": {
          "text_tokens": 512,
          "audio_tokens": 0
        }
      },
      "output_token_details": {
        "text_tokens": 18,
        "audio_tokens": 0
      }
    },
    "metadata": null
  }
}
2025-06-05 16:00:57,709 - telephony_realtime_bridge - INFO - Received OpenAI message type: rate_limits.updated
2025-06-05 16:00:57,766 - telephony_realtime_bridge - INFO - Received OpenAI message type: conversation.item.created
2025-06-05 16:00:57,766 - telephony_realtime_bridge - INFO - Conversation item created
2025-06-05 16:00:57,787 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.created
2025-06-05 16:00:57,787 - telephony_realtime_bridge - INFO - Response event details: {
  "type": "response.created",
  "event_id": "event_BfDrqwGvhLXsi745U2niF",
  "response": {
    "object": "realtime.response",
    "id": "resp_BfDrq1fS4HbImTehYHlyX",
    "status": "in_progress",
    "status_details": null,
    "output": [],
    "conversation_id": "conv_BfDrlBNrWFCU1HcoQqgWa",
    "modalities": [
      "audio",
      "text"
    ],
    "voice": "alloy",
    "output_audio_format": "pcm16",
    "temperature": 0.8,
    "max_output_tokens": 4096,
    "usage": null,
    "metadata": null
  }
}
2025-06-05 16:00:57,787 - telephony_realtime_bridge - INFO - Response creation started
2025-06-05 16:00:58,031 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.output_item.added
2025-06-05 16:00:58,031 - telephony_realtime_bridge - INFO - Output item added: {
  "id": "item_BfDrq7lQj4RC9XyHIaSla",
  "object": "realtime.item",
  "type": "message",
  "status": "in_progress",
  "role": "assistant",
  "content": []
}
2025-06-05 16:00:58,031 - telephony_realtime_bridge - INFO - Output item added: {'id': 'item_BfDrq7lQj4RC9XyHIaSla', 'object': 'realtime.item', 'type': 'message', 'status': 'in_progress', 'role': 'assistant', 'content': []}
2025-06-05 16:00:58,031 - telephony_realtime_bridge - INFO - Received OpenAI message type: conversation.item.created
2025-06-05 16:00:58,031 - telephony_realtime_bridge - INFO - Conversation item created
2025-06-05 16:00:58,031 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.content_part.added
2025-06-05 16:00:58,031 - telephony_realtime_bridge - INFO - Content part added: {
  "type": "audio",
  "transcript": ""
}
2025-06-05 16:00:58,031 - telephony_realtime_bridge - INFO - Content part added: {'type': 'audio', 'transcript': ''}
2025-06-05 16:00:58,031 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:00:58,031 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 1
2025-06-05 16:00:58,047 - telephony_realtime_bridge - DEBUG - Received audio transcript delta: I
2025-06-05 16:00:58,053 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:00:58,053 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 4
2025-06-05 16:00:58,053 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  can
2025-06-05 16:00:58,062 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:00:58,062 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 5
2025-06-05 16:00:58,063 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  help
2025-06-05 16:00:58,069 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:00:58,069 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 4
2025-06-05 16:00:58,069 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  you
2025-06-05 16:00:58,076 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:00:58,077 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 5
2025-06-05 16:00:58,077 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  with
2025-06-05 16:00:58,084 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:00:58,084 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 5
2025-06-05 16:00:58,084 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  that
2025-06-05 16:00:58,093 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:00:58,093 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 1
2025-06-05 16:00:58,093 - telephony_realtime_bridge - DEBUG - Received audio transcript delta: .
2025-06-05 16:00:58,185 - telephony_realtime_bridge - INFO - Received OpenAI message type: conversation.item.input_audio_transcription.delta
2025-06-05 16:00:58,185 - telephony_realtime_bridge - DEBUG - Received input audio transcription delta: Hi, I need to replace my card.

2025-06-05 16:00:58,185 - telephony_realtime_bridge - INFO - Received OpenAI message type: conversation.item.input_audio_transcription.completed
2025-06-05 16:00:58,191 - telephony_realtime_bridge - INFO - Full user transcript (input audio): Hi, I need to replace my card.

2025-06-05 16:00:58,191 - call_recorder - INFO - Transcript added: [caller] Hi, I need to replace my card.
...
2025-06-05 16:00:58,191 - telephony_realtime_bridge - INFO - Input audio transcription completed
2025-06-05 16:00:58,225 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-05 16:00:58,226 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 6400
2025-06-05 16:00:58,226 - telephony_realtime_bridge - INFO - Started play stream: aa58c212-80a8-43f4-a818-283057109f66
2025-06-05 16:00:58,227 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 2400 -> 1600 samples, 100.0ms -> 100.0ms
2025-06-05 16:00:58,226 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.start
2025-06-05 16:00:58,227 - multi_turn_test - INFO - [MOCK] Play stream started: aa58c212-80a8-43f4-a818-283057109f66
2025-06-05 16:00:58,227 - multi_turn_test - INFO - [MOCK] Collecting response audio...
2025-06-05 16:00:58,227 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 6400 bytes)
2025-06-05 16:00:58,227 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-05 16:00:58,227 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (6400 bytes base64)
2025-06-05 16:00:58,242 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:00:58,242 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 6
2025-06-05 16:00:58,242 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  Which
2025-06-05 16:00:58,248 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:00:58,249 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 5
2025-06-05 16:00:58,249 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  type
2025-06-05 16:00:58,277 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-05 16:00:58,277 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 9600
2025-06-05 16:00:58,278 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 3600 -> 2400 samples, 150.0ms -> 150.0ms
2025-06-05 16:00:58,279 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 9600 bytes)
2025-06-05 16:00:58,279 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-05 16:00:58,279 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (9600 bytes base64)
2025-06-05 16:00:58,371 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-05 16:00:58,372 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 16000
2025-06-05 16:00:58,373 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 6000 -> 4000 samples, 250.0ms -> 250.0ms
2025-06-05 16:00:58,373 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 16000 bytes)
2025-06-05 16:00:58,373 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-05 16:00:58,373 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (16000 bytes base64)
2025-06-05 16:00:58,394 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:00:58,394 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 3
2025-06-05 16:00:58,394 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  of
2025-06-05 16:00:58,404 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:00:58,404 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 5
2025-06-05 16:00:58,405 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  card
2025-06-05 16:00:58,435 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-05 16:00:58,435 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 16000
2025-06-05 16:00:58,435 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 6000 -> 4000 samples, 250.0ms -> 250.0ms
2025-06-05 16:00:58,437 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 16000 bytes)
2025-06-05 16:00:58,437 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-05 16:00:58,438 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (16000 bytes base64)
2025-06-05 16:00:58,466 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-05 16:00:58,466 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 16000
2025-06-05 16:00:58,466 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 6000 -> 4000 samples, 250.0ms -> 250.0ms
2025-06-05 16:00:58,466 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 16000 bytes)
2025-06-05 16:00:58,466 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-05 16:00:58,466 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (16000 bytes base64)
2025-06-05 16:00:58,555 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-05 16:00:58,555 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 16000
2025-06-05 16:00:58,555 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 6000 -> 4000 samples, 250.0ms -> 250.0ms
2025-06-05 16:00:58,571 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 16000 bytes)
2025-06-05 16:00:58,571 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-05 16:00:58,571 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:00:58,571 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (16000 bytes base64)
2025-06-05 16:00:58,571 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 3
2025-06-05 16:00:58,571 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  do
2025-06-05 16:00:58,576 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:00:58,576 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 4
2025-06-05 16:00:58,577 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  you
2025-06-05 16:00:58,594 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:00:58,594 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 5
2025-06-05 16:00:58,594 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  need
2025-06-05 16:00:58,594 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:00:58,594 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 3
2025-06-05 16:00:58,594 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  to
2025-06-05 16:00:58,609 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:00:58,609 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 8
2025-06-05 16:00:58,609 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  replace
2025-06-05 16:00:58,614 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:00:58,614 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 1
2025-06-05 16:00:58,614 - telephony_realtime_bridge - DEBUG - Received audio transcript delta: ?
2025-06-05 16:00:58,621 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:00:58,621 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 5
2025-06-05 16:00:58,622 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  Your
2025-06-05 16:00:58,632 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:00:58,632 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 8
2025-06-05 16:00:58,632 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  options
2025-06-05 16:00:58,670 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-05 16:00:58,670 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 32000
2025-06-05 16:00:58,671 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 12000 -> 8000 samples, 500.0ms -> 500.0ms
2025-06-05 16:00:58,673 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 32000 bytes)
2025-06-05 16:00:58,673 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-05 16:00:58,674 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (32000 bytes base64)
2025-06-05 16:00:58,874 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-05 16:00:58,875 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 48000
2025-06-05 16:00:58,876 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 18000 -> 12000 samples, 750.0ms -> 750.0ms
2025-06-05 16:00:58,879 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 48000 bytes)
2025-06-05 16:00:58,880 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-05 16:00:58,880 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (48000 bytes base64)
2025-06-05 16:00:58,906 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:00:58,906 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 4
2025-06-05 16:00:58,907 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  are
2025-06-05 16:00:58,916 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:00:58,916 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 5
2025-06-05 16:00:58,916 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  Gold
2025-06-05 16:00:58,927 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:00:58,927 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 5
2025-06-05 16:00:58,927 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  card
2025-06-05 16:00:58,930 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:00:58,931 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 1
2025-06-05 16:00:58,931 - telephony_realtime_bridge - DEBUG - Received audio transcript delta: ,
2025-06-05 16:00:58,933 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:00:58,934 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 7
2025-06-05 16:00:58,934 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  Silver
2025-06-05 16:00:58,942 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:00:58,942 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 5
2025-06-05 16:00:58,942 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  card
2025-06-05 16:00:58,950 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:00:58,950 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 1
2025-06-05 16:00:58,950 - telephony_realtime_bridge - DEBUG - Received audio transcript delta: ,
2025-06-05 16:00:58,959 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:00:58,960 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 3
2025-06-05 16:00:58,960 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  or
2025-06-05 16:00:59,131 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-05 16:00:59,131 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 64000
2025-06-05 16:00:59,133 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 24000 -> 16000 samples, 1000.0ms -> 1000.0ms
2025-06-05 16:00:59,136 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 64000 bytes)
2025-06-05 16:00:59,137 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-05 16:00:59,137 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (64000 bytes base64)
2025-06-05 16:00:59,311 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-05 16:00:59,311 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 64000
2025-06-05 16:00:59,312 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 24000 -> 16000 samples, 1000.0ms -> 1000.0ms
2025-06-05 16:00:59,315 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 64000 bytes)
2025-06-05 16:00:59,316 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-05 16:00:59,317 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (64000 bytes base64)
2025-06-05 16:00:59,363 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:00:59,363 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 6
2025-06-05 16:00:59,364 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  Basic
2025-06-05 16:00:59,370 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:00:59,370 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 5
2025-06-05 16:00:59,370 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  card
2025-06-05 16:00:59,379 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:00:59,379 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 1
2025-06-05 16:00:59,379 - telephony_realtime_bridge - DEBUG - Received audio transcript delta: .
2025-06-05 16:00:59,469 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-05 16:00:59,469 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 64000
2025-06-05 16:00:59,470 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 24000 -> 16000 samples, 1000.0ms -> 1000.0ms
2025-06-05 16:00:59,474 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 64000 bytes)
2025-06-05 16:00:59,474 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-05 16:00:59,474 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (64000 bytes base64)
2025-06-05 16:00:59,660 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-05 16:00:59,661 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 64000
2025-06-05 16:00:59,662 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 24000 -> 16000 samples, 1000.0ms -> 1000.0ms
2025-06-05 16:00:59,665 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 64000 bytes)
2025-06-05 16:00:59,666 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-05 16:00:59,666 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (64000 bytes base64)
2025-06-05 16:00:59,831 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-05 16:00:59,831 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 64000
2025-06-05 16:00:59,832 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 24000 -> 16000 samples, 1000.0ms -> 1000.0ms
2025-06-05 16:00:59,836 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 64000 bytes)
2025-06-05 16:00:59,837 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-05 16:00:59,837 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (64000 bytes base64)
2025-06-05 16:01:00,029 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-05 16:01:00,030 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 85464
2025-06-05 16:01:00,031 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 32048 -> 21365 samples, 1335.3ms -> 1335.3ms
2025-06-05 16:01:00,035 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 85464 bytes)
2025-06-05 16:01:00,036 - telephony_realtime_bridge - INFO - Received OpenAI message type: rate_limits.updated
2025-06-05 16:01:00,036 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-05 16:01:00,036 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (85464 bytes base64)
2025-06-05 16:01:00,040 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.done
2025-06-05 16:01:00,040 - telephony_realtime_bridge - INFO - Audio response completed
2025-06-05 16:01:00,041 - telephony_realtime_bridge - INFO - Stopped play stream: aa58c212-80a8-43f4-a818-283057109f66
2025-06-05 16:01:00,041 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.stop
2025-06-05 16:01:00,041 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.done
2025-06-05 16:01:00,041 - telephony_realtime_bridge - INFO - Full AI transcript (output audio): I can help you with that. Which type of card do you need to replace? Your options are Gold card, Silver card, or Basic card.
2025-06-05 16:01:00,041 - multi_turn_test - INFO - [MOCK] Response collected: 14 chunks
2025-06-05 16:01:00,042 - call_recorder - INFO - Transcript added: [bot] I can help you with that. Which type of card do yo...
2025-06-05 16:01:00,042 - telephony_realtime_bridge - INFO - Audio transcript completed
2025-06-05 16:01:00,042 - multi_turn_test - INFO - [MOCK] Play stream stopped: aa58c212-80a8-43f4-a818-283057109f66
2025-06-05 16:01:00,042 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.content_part.done
2025-06-05 16:01:00,042 - telephony_realtime_bridge - INFO - Content part completed
2025-06-05 16:01:00,043 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.output_item.done
2025-06-05 16:01:00,043 - telephony_realtime_bridge - INFO - Output item completed
2025-06-05 16:01:00,048 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.done
2025-06-05 16:01:00,048 - telephony_realtime_bridge - INFO - Response event details: {
  "type": "response.done",
  "event_id": "event_BfDrs87JLZYRAkxTDNHfA",
  "response": {
    "object": "realtime.response",
    "id": "resp_BfDrq1fS4HbImTehYHlyX",
    "status": "completed",
    "status_details": null,
    "output": [
      {
        "id": "item_BfDrq7lQj4RC9XyHIaSla",
        "object": "realtime.item",
        "type": "message",
        "status": "completed",
        "role": "assistant",
        "content": [
          {
            "type": "audio",
            "transcript": "I can help you with that. Which type of card do you need to replace? Your options are Gold card, Silver card, or Basic card."
          }
        ]
      }
    ],
    "conversation_id": "conv_BfDrlBNrWFCU1HcoQqgWa",
    "modalities": [
      "audio",
      "text"
    ],
    "voice": "alloy",
    "output_audio_format": "pcm16",
    "temperature": 0.8,
    "max_output_tokens": 4096,
    "usage": {
      "total_tokens": 941,
      "input_tokens": 720,
      "output_tokens": 221,
      "input_token_details": {
        "text_tokens": 674,
        "audio_tokens": 46,
        "cached_tokens": 576,
        "cached_tokens_details": {
          "text_tokens": 576,
          "audio_tokens": 0
        }
      },
      "output_token_details": {
        "text_tokens": 46,
        "audio_tokens": 175
      }
    },
    "metadata": null
  }
}
2025-06-05 16:01:00,148 - multi_turn_test - INFO - [MOCK] Response received: 14 chunks
2025-06-05 16:01:00,148 - multi_turn_test - INFO - [MOCK] Turn 1: AI response received (14 chunks)
2025-06-05 16:01:00,152 - multi_turn_test - INFO - [MOCK] Saved audio: turn_01_response_8494a38b.wav (13.25s)
2025-06-05 16:01:00,153 - multi_turn_test - INFO - [MOCK] Waiting 2.0s before next turn...
2025-06-05 16:01:02,167 - multi_turn_test - INFO - 
[MOCK] === Turn 2/5 ===
2025-06-05 16:01:02,167 - multi_turn_test - INFO - [MOCK] Sending: my_gold_card.wav
2025-06-05 16:01:02,169 - multi_turn_test - INFO - [MOCK] Loading audio: my_gold_card.wav
2025-06-05 16:01:02,171 - multi_turn_test - INFO -    Format: 1ch, 16bit, 24000Hz
2025-06-05 16:01:02,563 - multi_turn_test - INFO -    Resampling from 24000Hz to 16000Hz...
2025-06-05 16:01:02,583 - multi_turn_test - INFO -    Split into 2 chunks (~1.01s total)
2025-06-05 16:01:02,583 - multi_turn_test - INFO - [MOCK] Sending user audio: my_gold_card.wav (2 chunks)
2025-06-05 16:01:02,585 - telephony_realtime_bridge - INFO - Received telephony message: userStream.start
2025-06-05 16:01:02,585 - telephony_realtime_bridge - INFO - User stream start received: {'type': 'userStream.start', 'conversationId': '8494a38b-64e6-4bf0-ab89-6dfa4fbf755e'}
2025-06-05 16:01:02,586 - telephony_realtime_bridge - INFO - User stream started for conversation: 8494a38b-64e6-4bf0-ab89-6dfa4fbf755e
2025-06-05 16:01:02,586 - multi_turn_test - INFO - [MOCK] Received from bridge: userStream.started
2025-06-05 16:01:02,586 - multi_turn_test - INFO - [MOCK] User stream started
2025-06-05 16:01:02,695 - multi_turn_test - DEBUG - [MOCK] Sent chunk 1/2
2025-06-05 16:01:02,695 - telephony_realtime_bridge - INFO - Received telephony message: userStream.chunk with audio chunk size: 42668 bytes
2025-06-05 16:01:02,696 - telephony_realtime_bridge - DEBUG - Processing audio chunk #1: 32000 -> 32000 bytes (~1000.0ms of audio). Total sent: 32000 bytes
2025-06-05 16:01:02,697 - telephony_realtime_bridge - DEBUG - Sending audio to realtime-websocket (size: 42668 bytes base64)
2025-06-05 16:01:02,721 - multi_turn_test - DEBUG - [MOCK] Sent chunk 2/2
2025-06-05 16:01:02,721 - telephony_realtime_bridge - INFO - Received telephony message: userStream.chunk with audio chunk size: 4268 bytes
2025-06-05 16:01:02,722 - telephony_realtime_bridge - DEBUG - Processing audio chunk #2: 3200 -> 3200 bytes (~100.0ms of audio). Total sent: 35200 bytes
2025-06-05 16:01:02,722 - telephony_realtime_bridge - DEBUG - Sending audio to realtime-websocket (size: 4268 bytes base64)
2025-06-05 16:01:02,752 - telephony_realtime_bridge - INFO - Received telephony message: userStream.stop
2025-06-05 16:01:02,752 - multi_turn_test - INFO - [MOCK] User audio sent successfully
2025-06-05 16:01:02,752 - telephony_realtime_bridge - INFO - User stream stop received for conversation: 8494a38b-64e6-4bf0-ab89-6dfa4fbf755e
2025-06-05 16:01:02,752 - multi_turn_test - INFO - [MOCK] Turn 2: User audio sent successfully
2025-06-05 16:01:02,753 - telephony_realtime_bridge - INFO - Buffer state before commit: 2 chunks, 35200 bytes (~1100.0ms of audio)
2025-06-05 16:01:02,753 - multi_turn_test - INFO - [MOCK] Waiting for LLM response...
2025-06-05 16:01:02,753 - telephony_realtime_bridge - INFO - realtime_websocket_object: <bound method Connection.send of <websockets.asyncio.client.ClientConnection object at 0x0000025C7AF9B410>>
2025-06-05 16:01:02,753 - telephony_realtime_bridge - INFO - Audio buffer committed with 2 chunks (35200 bytes)
2025-06-05 16:01:02,753 - telephony_realtime_bridge - INFO - Audio buffer commit sent: {"type":"input_audio_buffer.commit","event_id":null}
2025-06-05 16:01:02,753 - telephony_realtime_bridge - INFO - Response creation triggered after audio buffer commit
2025-06-05 16:01:02,754 - multi_turn_test - INFO - [MOCK] Received from bridge: userStream.stopped
2025-06-05 16:01:02,754 - multi_turn_test - INFO - [MOCK] User stream stopped
2025-06-05 16:01:02,876 - telephony_realtime_bridge - INFO - Received OpenAI message type: input_audio_buffer.committed
2025-06-05 16:01:02,877 - telephony_realtime_bridge - INFO - Received OpenAI message type: conversation.item.created
2025-06-05 16:01:02,877 - telephony_realtime_bridge - INFO - Conversation item created
2025-06-05 16:01:02,881 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.created
2025-06-05 16:01:02,881 - telephony_realtime_bridge - INFO - Response event details: {
  "type": "response.created",
  "event_id": "event_BfDrvw7KSQ3ZshgxDi8ze",
  "response": {
    "object": "realtime.response",
    "id": "resp_BfDrvZhUqRNbFqp0ZRqKl",
    "status": "in_progress",
    "status_details": null,
    "output": [],
    "conversation_id": "conv_BfDrlBNrWFCU1HcoQqgWa",
    "modalities": [
      "audio",
      "text"
    ],
    "voice": "alloy",
    "output_audio_format": "pcm16",
    "temperature": 0.8,
    "max_output_tokens": 4096,
    "usage": null,
    "metadata": null
  }
}
2025-06-05 16:01:02,882 - telephony_realtime_bridge - INFO - Response creation started
2025-06-05 16:01:03,233 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.output_item.added
2025-06-05 16:01:03,234 - telephony_realtime_bridge - INFO - Output item added: {
  "id": "item_BfDrvMFldQlxHBbY7O69N",
  "object": "realtime.item",
  "type": "message",
  "status": "in_progress",
  "role": "assistant",
  "content": []
}
2025-06-05 16:01:03,234 - telephony_realtime_bridge - INFO - Output item added: {'id': 'item_BfDrvMFldQlxHBbY7O69N', 'object': 'realtime.item', 'type': 'message', 'status': 'in_progress', 'role': 'assistant', 'content': []}
2025-06-05 16:01:03,234 - telephony_realtime_bridge - INFO - Received OpenAI message type: conversation.item.created
2025-06-05 16:01:03,235 - telephony_realtime_bridge - INFO - Conversation item created
2025-06-05 16:01:03,255 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.content_part.added
2025-06-05 16:01:03,256 - telephony_realtime_bridge - INFO - Content part added: {
  "type": "audio",
  "transcript": ""
}
2025-06-05 16:01:03,256 - telephony_realtime_bridge - INFO - Content part added: {'type': 'audio', 'transcript': ''}
2025-06-05 16:01:03,257 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:03,257 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 5
2025-06-05 16:01:03,258 - telephony_realtime_bridge - DEBUG - Received audio transcript delta: Thank
2025-06-05 16:01:03,258 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:03,258 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 4
2025-06-05 16:01:03,258 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  you
2025-06-05 16:01:03,265 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:03,265 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 4
2025-06-05 16:01:03,266 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  for
2025-06-05 16:01:03,270 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:03,270 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 11
2025-06-05 16:01:03,271 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  confirming
2025-06-05 16:01:03,281 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:03,282 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 1
2025-06-05 16:01:03,282 - telephony_realtime_bridge - DEBUG - Received audio transcript delta: .
2025-06-05 16:01:03,404 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-05 16:01:03,405 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 6400
2025-06-05 16:01:03,405 - telephony_realtime_bridge - INFO - Started play stream: 1cb9fcf7-7921-4228-b5fc-28c665a5e019
2025-06-05 16:01:03,406 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.start
2025-06-05 16:01:03,406 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 2400 -> 1600 samples, 100.0ms -> 100.0ms
2025-06-05 16:01:03,406 - multi_turn_test - INFO - [MOCK] Play stream started: 1cb9fcf7-7921-4228-b5fc-28c665a5e019
2025-06-05 16:01:03,407 - multi_turn_test - INFO - [MOCK] Collecting response audio...
2025-06-05 16:01:03,407 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 6400 bytes)
2025-06-05 16:01:03,408 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-05 16:01:03,408 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (6400 bytes base64)
2025-06-05 16:01:03,433 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:03,433 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 6
2025-06-05 16:01:03,434 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  Could
2025-06-05 16:01:03,456 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-05 16:01:03,456 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 9600
2025-06-05 16:01:03,457 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 3600 -> 2400 samples, 150.0ms -> 150.0ms
2025-06-05 16:01:03,458 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 9600 bytes)
2025-06-05 16:01:03,458 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-05 16:01:03,459 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (9600 bytes base64)
2025-06-05 16:01:03,548 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-05 16:01:03,550 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 16000
2025-06-05 16:01:03,550 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 6000 -> 4000 samples, 250.0ms -> 250.0ms
2025-06-05 16:01:03,552 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 16000 bytes)
2025-06-05 16:01:03,552 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-05 16:01:03,552 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (16000 bytes base64)
2025-06-05 16:01:03,573 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:03,573 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 4
2025-06-05 16:01:03,574 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  you
2025-06-05 16:01:03,602 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-05 16:01:03,602 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 16000
2025-06-05 16:01:03,603 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 6000 -> 4000 samples, 250.0ms -> 250.0ms
2025-06-05 16:01:03,605 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 16000 bytes)
2025-06-05 16:01:03,605 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-05 16:01:03,605 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:03,605 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (16000 bytes base64)
2025-06-05 16:01:03,605 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 7
2025-06-05 16:01:03,605 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  please
2025-06-05 16:01:03,606 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:03,606 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 4
2025-06-05 16:01:03,606 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  let
2025-06-05 16:01:03,640 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-05 16:01:03,640 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 16000
2025-06-05 16:01:03,640 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 6000 -> 4000 samples, 250.0ms -> 250.0ms
2025-06-05 16:01:03,642 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 16000 bytes)
2025-06-05 16:01:03,642 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-05 16:01:03,642 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (16000 bytes base64)
2025-06-05 16:01:03,730 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:03,731 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 3
2025-06-05 16:01:03,731 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  me
2025-06-05 16:01:03,733 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-05 16:01:03,734 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 16000
2025-06-05 16:01:03,734 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 6000 -> 4000 samples, 250.0ms -> 250.0ms
2025-06-05 16:01:03,735 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 16000 bytes)
2025-06-05 16:01:03,736 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-05 16:01:03,736 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (16000 bytes base64)
2025-06-05 16:01:03,736 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:03,737 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 5
2025-06-05 16:01:03,737 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  know
2025-06-05 16:01:03,746 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:03,747 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 4
2025-06-05 16:01:03,747 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  the
2025-06-05 16:01:03,755 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:03,755 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 7
2025-06-05 16:01:03,755 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  reason
2025-06-05 16:01:03,762 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:03,762 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 4
2025-06-05 16:01:03,762 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  for
2025-06-05 16:01:03,770 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:03,770 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 10
2025-06-05 16:01:03,770 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  replacing
2025-06-05 16:01:03,780 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:03,780 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 5
2025-06-05 16:01:03,780 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  your
2025-06-05 16:01:03,785 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:03,786 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 5
2025-06-05 16:01:03,786 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  Gold
2025-06-05 16:01:03,827 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-05 16:01:03,827 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 32000
2025-06-05 16:01:03,828 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 12000 -> 8000 samples, 500.0ms -> 500.0ms
2025-06-05 16:01:03,832 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 32000 bytes)
2025-06-05 16:01:03,832 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-05 16:01:03,832 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (32000 bytes base64)
2025-06-05 16:01:04,029 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-05 16:01:04,030 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 48000
2025-06-05 16:01:04,031 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 18000 -> 12000 samples, 750.0ms -> 750.0ms
2025-06-05 16:01:04,036 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 48000 bytes)
2025-06-05 16:01:04,036 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-05 16:01:04,037 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (48000 bytes base64)
2025-06-05 16:01:04,044 - telephony_realtime_bridge - INFO - Received OpenAI message type: conversation.item.input_audio_transcription.delta
2025-06-05 16:01:04,044 - telephony_realtime_bridge - DEBUG - Received input audio transcription delta: It's my gold card.

2025-06-05 16:01:04,044 - telephony_realtime_bridge - INFO - Received OpenAI message type: conversation.item.input_audio_transcription.completed
2025-06-05 16:01:04,045 - telephony_realtime_bridge - INFO - Full user transcript (input audio): It's my gold card.

2025-06-05 16:01:04,045 - call_recorder - INFO - Transcript added: [caller] It's my gold card.
...
2025-06-05 16:01:04,045 - telephony_realtime_bridge - INFO - Input audio transcription completed
2025-06-05 16:01:04,054 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:04,055 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 5
2025-06-05 16:01:04,055 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  card
2025-06-05 16:01:04,062 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:04,062 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 1
2025-06-05 16:01:04,062 - telephony_realtime_bridge - DEBUG - Received audio transcript delta: ?
2025-06-05 16:01:04,067 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:04,067 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 3
2025-06-05 16:01:04,067 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  Is
2025-06-05 16:01:04,075 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:04,075 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 3
2025-06-05 16:01:04,076 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  it
2025-06-05 16:01:04,079 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:04,079 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 5
2025-06-05 16:01:04,079 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  Lost
2025-06-05 16:01:04,088 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:04,088 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 1
2025-06-05 16:01:04,089 - telephony_realtime_bridge - DEBUG - Received audio transcript delta: ,
2025-06-05 16:01:04,095 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:04,095 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 4
2025-06-05 16:01:04,095 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  Dam
2025-06-05 16:01:04,102 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:04,102 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 4
2025-06-05 16:01:04,102 - telephony_realtime_bridge - DEBUG - Received audio transcript delta: aged
2025-06-05 16:01:04,110 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:04,111 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 1
2025-06-05 16:01:04,111 - telephony_realtime_bridge - DEBUG - Received audio transcript delta: ,
2025-06-05 16:01:04,291 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-05 16:01:04,292 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 64000
2025-06-05 16:01:04,292 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 24000 -> 16000 samples, 1000.0ms -> 1000.0ms
2025-06-05 16:01:04,296 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 64000 bytes)
2025-06-05 16:01:04,297 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-05 16:01:04,297 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (64000 bytes base64)
2025-06-05 16:01:04,432 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-05 16:01:04,432 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 64000
2025-06-05 16:01:04,433 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 24000 -> 16000 samples, 1000.0ms -> 1000.0ms
2025-06-05 16:01:04,437 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 64000 bytes)
2025-06-05 16:01:04,438 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-05 16:01:04,439 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (64000 bytes base64)
2025-06-05 16:01:04,527 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:04,527 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 3
2025-06-05 16:01:04,528 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  St
2025-06-05 16:01:04,528 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:04,528 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 4
2025-06-05 16:01:04,528 - telephony_realtime_bridge - DEBUG - Received audio transcript delta: olen
2025-06-05 16:01:04,529 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:04,529 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 1
2025-06-05 16:01:04,529 - telephony_realtime_bridge - DEBUG - Received audio transcript delta: ,
2025-06-05 16:01:04,530 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:04,530 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 3
2025-06-05 16:01:04,530 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  or
2025-06-05 16:01:04,532 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:04,532 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 6
2025-06-05 16:01:04,533 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  Other
2025-06-05 16:01:04,541 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:04,541 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 1
2025-06-05 16:01:04,541 - telephony_realtime_bridge - DEBUG - Received audio transcript delta: ?
2025-06-05 16:01:04,566 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-05 16:01:04,567 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 64000
2025-06-05 16:01:04,567 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 24000 -> 16000 samples, 1000.0ms -> 1000.0ms
2025-06-05 16:01:04,571 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 64000 bytes)
2025-06-05 16:01:04,571 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-05 16:01:04,571 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (64000 bytes base64)
2025-06-05 16:01:04,842 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-05 16:01:04,842 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 64000
2025-06-05 16:01:04,842 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 24000 -> 16000 samples, 1000.0ms -> 1000.0ms
2025-06-05 16:01:04,859 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 64000 bytes)
2025-06-05 16:01:04,859 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-05 16:01:04,860 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (64000 bytes base64)
2025-06-05 16:01:04,991 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-05 16:01:04,991 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 64000
2025-06-05 16:01:04,996 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 24000 -> 16000 samples, 1000.0ms -> 1000.0ms
2025-06-05 16:01:04,999 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 64000 bytes)
2025-06-05 16:01:04,999 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-05 16:01:05,002 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (64000 bytes base64)
2025-06-05 16:01:05,170 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-05 16:01:05,170 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 95064
2025-06-05 16:01:05,173 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 35648 -> 23765 samples, 1485.3ms -> 1485.3ms
2025-06-05 16:01:05,173 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 95064 bytes)
2025-06-05 16:01:05,173 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.done
2025-06-05 16:01:05,173 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-05 16:01:05,173 - telephony_realtime_bridge - INFO - Audio response completed
2025-06-05 16:01:05,173 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (95064 bytes base64)
2025-06-05 16:01:05,180 - telephony_realtime_bridge - INFO - Stopped play stream: 1cb9fcf7-7921-4228-b5fc-28c665a5e019
2025-06-05 16:01:05,180 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.stop
2025-06-05 16:01:05,181 - multi_turn_test - INFO - [MOCK] Response collected: 14 chunks
2025-06-05 16:01:05,180 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.done
2025-06-05 16:01:05,181 - multi_turn_test - INFO - [MOCK] Play stream stopped: 1cb9fcf7-7921-4228-b5fc-28c665a5e019
2025-06-05 16:01:05,181 - telephony_realtime_bridge - INFO - Full AI transcript (output audio): Thank you for confirming. Could you please let me know the reason for replacing your Gold card? Is it Lost, Damaged, Stolen, or Other?
2025-06-05 16:01:05,181 - call_recorder - INFO - Transcript added: [bot] Thank you for confirming. Could you please let me ...
2025-06-05 16:01:05,181 - telephony_realtime_bridge - INFO - Audio transcript completed
2025-06-05 16:01:05,212 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.content_part.done
2025-06-05 16:01:05,212 - telephony_realtime_bridge - INFO - Content part completed
2025-06-05 16:01:05,213 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.output_item.done
2025-06-05 16:01:05,213 - telephony_realtime_bridge - INFO - Output item completed
2025-06-05 16:01:05,213 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.done
2025-06-05 16:01:05,213 - telephony_realtime_bridge - INFO - Response event details: {
  "type": "response.done",
  "event_id": "event_BfDrx7u6S7uGMWyqeSbbc",
  "response": {
    "object": "realtime.response",
    "id": "resp_BfDrvZhUqRNbFqp0ZRqKl",
    "status": "completed",
    "status_details": null,
    "output": [
      {
        "id": "item_BfDrvMFldQlxHBbY7O69N",
        "object": "realtime.item",
        "type": "message",
        "status": "completed",
        "role": "assistant",
        "content": [
          {
            "type": "audio",
            "transcript": "Thank you for confirming. Could you please let me know the reason for replacing your Gold card? Is it Lost, Damaged, Stolen, or Other?"
          }
        ]
      }
    ],
    "conversation_id": "conv_BfDrlBNrWFCU1HcoQqgWa",
    "modalities": [
      "audio",
      "text"
    ],
    "voice": "alloy",
    "output_audio_format": "pcm16",
    "temperature": 0.8,
    "max_output_tokens": 4096,
    "usage": {
      "total_tokens": 1184,
      "input_tokens": 958,
      "output_tokens": 226,
      "input_token_details": {
        "text_tokens": 730,
        "audio_tokens": 228,
        "cached_tokens": 832,
        "cached_tokens_details": {
          "text_tokens": 704,
          "audio_tokens": 128
        }
      },
      "output_token_details": {
        "text_tokens": 48,
        "audio_tokens": 178
      }
    },
    "metadata": null
  }
}
2025-06-05 16:01:05,214 - telephony_realtime_bridge - INFO - Received OpenAI message type: rate_limits.updated
2025-06-05 16:01:05,284 - multi_turn_test - INFO - [MOCK] Response received: 14 chunks
2025-06-05 16:01:05,284 - multi_turn_test - INFO - [MOCK] Turn 2: AI response received (14 chunks)
2025-06-05 16:01:05,290 - multi_turn_test - INFO - [MOCK] Saved audio: turn_02_response_8494a38b.wav (13.48s)
2025-06-05 16:01:05,290 - multi_turn_test - INFO - [MOCK] Waiting 2.0s before next turn...
2025-06-05 16:01:07,294 - multi_turn_test - INFO - 
[MOCK] === Turn 3/5 ===
2025-06-05 16:01:07,294 - multi_turn_test - INFO - [MOCK] Sending: i_lost_it.wav
2025-06-05 16:01:07,295 - multi_turn_test - INFO - [MOCK] Loading audio: i_lost_it.wav
2025-06-05 16:01:07,295 - multi_turn_test - INFO -    Format: 1ch, 16bit, 24000Hz
2025-06-05 16:01:07,703 - multi_turn_test - INFO -    Resampling from 24000Hz to 16000Hz...
2025-06-05 16:01:07,717 - multi_turn_test - INFO -    Split into 1 chunks (~0.61s total)
2025-06-05 16:01:07,717 - multi_turn_test - INFO - [MOCK] Sending user audio: i_lost_it.wav (1 chunks)
2025-06-05 16:01:07,717 - telephony_realtime_bridge - INFO - Received telephony message: userStream.start
2025-06-05 16:01:07,718 - telephony_realtime_bridge - INFO - User stream start received: {'type': 'userStream.start', 'conversationId': '8494a38b-64e6-4bf0-ab89-6dfa4fbf755e'}
2025-06-05 16:01:07,718 - telephony_realtime_bridge - INFO - User stream started for conversation: 8494a38b-64e6-4bf0-ab89-6dfa4fbf755e
2025-06-05 16:01:07,720 - multi_turn_test - INFO - [MOCK] Received from bridge: userStream.started
2025-06-05 16:01:07,720 - multi_turn_test - INFO - [MOCK] User stream started
2025-06-05 16:01:07,815 - multi_turn_test - DEBUG - [MOCK] Sent chunk 1/1
2025-06-05 16:01:07,815 - telephony_realtime_bridge - INFO - Received telephony message: userStream.chunk with audio chunk size: 26136 bytes
2025-06-05 16:01:07,815 - telephony_realtime_bridge - DEBUG - Processing audio chunk #1: 19600 -> 19600 bytes (~612.5ms of audio). Total sent: 19600 bytes
2025-06-05 16:01:07,815 - telephony_realtime_bridge - DEBUG - Sending audio to realtime-websocket (size: 26136 bytes base64)
2025-06-05 16:01:07,854 - multi_turn_test - INFO - [MOCK] User audio sent successfully
2025-06-05 16:01:07,854 - telephony_realtime_bridge - INFO - Received telephony message: userStream.stop
2025-06-05 16:01:07,855 - multi_turn_test - INFO - [MOCK] Turn 3: User audio sent successfully
2025-06-05 16:01:07,855 - multi_turn_test - INFO - [MOCK] Waiting for LLM response...
2025-06-05 16:01:07,855 - telephony_realtime_bridge - INFO - User stream stop received for conversation: 8494a38b-64e6-4bf0-ab89-6dfa4fbf755e
2025-06-05 16:01:07,855 - telephony_realtime_bridge - INFO - Buffer state before commit: 1 chunks, 19600 bytes (~612.5ms of audio)
2025-06-05 16:01:07,856 - telephony_realtime_bridge - INFO - realtime_websocket_object: <bound method Connection.send of <websockets.asyncio.client.ClientConnection object at 0x0000025C7AF9B410>>
2025-06-05 16:01:07,856 - telephony_realtime_bridge - INFO - Audio buffer committed with 1 chunks (19600 bytes)
2025-06-05 16:01:07,856 - telephony_realtime_bridge - INFO - Audio buffer commit sent: {"type":"input_audio_buffer.commit","event_id":null}
2025-06-05 16:01:07,856 - telephony_realtime_bridge - INFO - Response creation triggered after audio buffer commit
2025-06-05 16:01:07,857 - multi_turn_test - INFO - [MOCK] Received from bridge: userStream.stopped
2025-06-05 16:01:07,857 - multi_turn_test - INFO - [MOCK] User stream stopped
2025-06-05 16:01:07,947 - telephony_realtime_bridge - INFO - Received OpenAI message type: input_audio_buffer.committed
2025-06-05 16:01:07,947 - telephony_realtime_bridge - INFO - Received OpenAI message type: conversation.item.created
2025-06-05 16:01:07,947 - telephony_realtime_bridge - INFO - Conversation item created
2025-06-05 16:01:07,947 - telephony_realtime_bridge - INFO - Received OpenAI message type: conversation.item.input_audio_transcription.delta
2025-06-05 16:01:07,947 - telephony_realtime_bridge - DEBUG - Received input audio transcription delta: 
2025-06-05 16:01:07,947 - telephony_realtime_bridge - INFO - Received OpenAI message type: conversation.item.input_audio_transcription.completed
2025-06-05 16:01:07,947 - telephony_realtime_bridge - INFO - Full user transcript (input audio): 
2025-06-05 16:01:07,947 - telephony_realtime_bridge - INFO - Input audio transcription completed
2025-06-05 16:01:07,990 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.created
2025-06-05 16:01:07,991 - telephony_realtime_bridge - INFO - Response event details: {
  "type": "response.created",
  "event_id": "event_BfDs0m5JQBdo512TW3s8c",
  "response": {
    "object": "realtime.response",
    "id": "resp_BfDs09uGa58AicjhZTRUO",
    "status": "in_progress",
    "status_details": null,
    "output": [],
    "conversation_id": "conv_BfDrlBNrWFCU1HcoQqgWa",
    "modalities": [
      "audio",
      "text"
    ],
    "voice": "alloy",
    "output_audio_format": "pcm16",
    "temperature": 0.8,
    "max_output_tokens": 4096,
    "usage": null,
    "metadata": null
  }
}
2025-06-05 16:01:07,991 - telephony_realtime_bridge - INFO - Response creation started
2025-06-05 16:01:08,447 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.output_item.added
2025-06-05 16:01:08,447 - telephony_realtime_bridge - INFO - Output item added: {
  "id": "item_BfDs0pLZ5KHIW5ugRFCWy",
  "object": "realtime.item",
  "type": "function_call",
  "status": "in_progress",
  "name": "replacement_reason",
  "call_id": "call_JSgVzUJf0BSJp1PO",
  "arguments": ""
}
2025-06-05 16:01:08,447 - telephony_realtime_bridge - INFO - Output item added: {'id': 'item_BfDs0pLZ5KHIW5ugRFCWy', 'object': 'realtime.item', 'type': 'function_call', 'status': 'in_progress', 'name': 'replacement_reason', 'call_id': 'call_JSgVzUJf0BSJp1PO', 'arguments': ''}
2025-06-05 16:01:08,447 - telephony_realtime_bridge - INFO - Captured function call: replacement_reason with call_id: call_JSgVzUJf0BSJp1PO
2025-06-05 16:01:08,447 - telephony_realtime_bridge - INFO - Received OpenAI message type: conversation.item.created
2025-06-05 16:01:08,447 - telephony_realtime_bridge - INFO - Conversation item created
2025-06-05 16:01:08,447 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.function_call_arguments.delta
2025-06-05 16:01:08,447 - telephony_realtime_bridge - INFO - 🎯 Routing response.function_call_arguments.delta to handler
2025-06-05 16:01:08,447 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.function_call_arguments.delta
2025-06-05 16:01:08,447 - telephony_realtime_bridge - INFO - 🎯 Routing response.function_call_arguments.delta to handler
2025-06-05 16:01:08,462 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.function_call_arguments.delta
2025-06-05 16:01:08,462 - telephony_realtime_bridge - INFO - 🎯 Routing response.function_call_arguments.delta to handler
2025-06-05 16:01:08,470 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.function_call_arguments.delta
2025-06-05 16:01:08,470 - telephony_realtime_bridge - INFO - 🎯 Routing response.function_call_arguments.delta to handler
2025-06-05 16:01:08,477 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.function_call_arguments.delta
2025-06-05 16:01:08,477 - telephony_realtime_bridge - INFO - 🎯 Routing response.function_call_arguments.delta to handler
2025-06-05 16:01:08,486 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.function_call_arguments.delta
2025-06-05 16:01:08,486 - telephony_realtime_bridge - INFO - 🎯 Routing response.function_call_arguments.delta to handler
2025-06-05 16:01:08,491 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.function_call_arguments.delta
2025-06-05 16:01:08,492 - telephony_realtime_bridge - INFO - 🎯 Routing response.function_call_arguments.delta to handler
2025-06-05 16:01:08,500 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.function_call_arguments.delta
2025-06-05 16:01:08,500 - telephony_realtime_bridge - INFO - 🎯 Routing response.function_call_arguments.delta to handler
2025-06-05 16:01:08,508 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.function_call_arguments.delta
2025-06-05 16:01:08,508 - telephony_realtime_bridge - INFO - 🎯 Routing response.function_call_arguments.delta to handler
2025-06-05 16:01:08,515 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.function_call_arguments.delta
2025-06-05 16:01:08,516 - telephony_realtime_bridge - INFO - 🎯 Routing response.function_call_arguments.delta to handler
2025-06-05 16:01:08,527 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.function_call_arguments.delta
2025-06-05 16:01:08,527 - telephony_realtime_bridge - INFO - 🎯 Routing response.function_call_arguments.delta to handler
2025-06-05 16:01:08,530 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.function_call_arguments.delta
2025-06-05 16:01:08,530 - telephony_realtime_bridge - INFO - 🎯 Routing response.function_call_arguments.delta to handler
2025-06-05 16:01:08,565 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.function_call_arguments.done
2025-06-05 16:01:08,565 - telephony_realtime_bridge - INFO - 🎯 Routing response.function_call_arguments.done to handler
2025-06-05 16:01:08,565 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.output_item.done
2025-06-05 16:01:08,565 - telephony_realtime_bridge - INFO - Output item completed
2025-06-05 16:01:08,565 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.done
2025-06-05 16:01:08,565 - telephony_realtime_bridge - INFO - Response event details: {
  "type": "response.done",
  "event_id": "event_BfDs1F7TrS6DnvVVisKd8",
  "response": {
    "object": "realtime.response",
    "id": "resp_BfDs09uGa58AicjhZTRUO",
    "status": "completed",
    "status_details": null,
    "output": [
      {
        "id": "item_BfDs0pLZ5KHIW5ugRFCWy",
        "object": "realtime.item",
        "type": "function_call",
        "status": "completed",
        "name": "replacement_reason",
        "call_id": "call_JSgVzUJf0BSJp1PO",
        "arguments": "{\"card_in_context\":\"Gold card\",\"reason\":\"Lost\"}"
      }
    ],
    "conversation_id": "conv_BfDrlBNrWFCU1HcoQqgWa",
    "modalities": [
      "audio",
      "text"
    ],
    "voice": "alloy",
    "output_audio_format": "pcm16",
    "temperature": 0.8,
    "max_output_tokens": 4096,
    "usage": {
      "total_tokens": 1221,
      "input_tokens": 1198,
      "output_tokens": 23,
      "input_token_details": {
        "text_tokens": 788,
        "audio_tokens": 410,
        "cached_tokens": 512,
        "cached_tokens_details": {
          "text_tokens": 512,
          "audio_tokens": 0
        }
      },
      "output_token_details": {
        "text_tokens": 23,
        "audio_tokens": 0
      }
    },
    "metadata": null
  }
}
2025-06-05 16:01:08,565 - telephony_realtime_bridge - INFO - Received OpenAI message type: rate_limits.updated
2025-06-05 16:01:08,565 - call_recorder - INFO - Function call logged: replacement_reason
2025-06-05 16:01:08,629 - telephony_realtime_bridge - INFO - Received OpenAI message type: conversation.item.created
2025-06-05 16:01:08,629 - telephony_realtime_bridge - INFO - Conversation item created
2025-06-05 16:01:08,713 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.created
2025-06-05 16:01:08,714 - telephony_realtime_bridge - INFO - Response event details: {
  "type": "response.created",
  "event_id": "event_BfDs1Z4MDhqQJmlLZtNic",
  "response": {
    "object": "realtime.response",
    "id": "resp_BfDs1qciiOrRhqKA4gPz2",
    "status": "in_progress",
    "status_details": null,
    "output": [],
    "conversation_id": "conv_BfDrlBNrWFCU1HcoQqgWa",
    "modalities": [
      "audio",
      "text"
    ],
    "voice": "alloy",
    "output_audio_format": "pcm16",
    "temperature": 0.8,
    "max_output_tokens": 4096,
    "usage": null,
    "metadata": null
  }
}
2025-06-05 16:01:08,714 - telephony_realtime_bridge - INFO - Response creation started
2025-06-05 16:01:08,977 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.output_item.added
2025-06-05 16:01:08,977 - telephony_realtime_bridge - INFO - Output item added: {
  "id": "item_BfDs16Qb6S61wtaBz9CUy",
  "object": "realtime.item",
  "type": "message",
  "status": "in_progress",
  "role": "assistant",
  "content": []
}
2025-06-05 16:01:08,977 - telephony_realtime_bridge - INFO - Output item added: {'id': 'item_BfDs16Qb6S61wtaBz9CUy', 'object': 'realtime.item', 'type': 'message', 'status': 'in_progress', 'role': 'assistant', 'content': []}
2025-06-05 16:01:08,992 - telephony_realtime_bridge - INFO - Received OpenAI message type: conversation.item.created
2025-06-05 16:01:08,992 - telephony_realtime_bridge - INFO - Conversation item created
2025-06-05 16:01:08,992 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.content_part.added
2025-06-05 16:01:08,992 - telephony_realtime_bridge - INFO - Content part added: {
  "type": "audio",
  "transcript": ""
}
2025-06-05 16:01:08,992 - telephony_realtime_bridge - INFO - Content part added: {'type': 'audio', 'transcript': ''}
2025-06-05 16:01:09,003 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:09,003 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 3
2025-06-05 16:01:09,004 - telephony_realtime_bridge - DEBUG - Received audio transcript delta: Got
2025-06-05 16:01:09,007 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:09,007 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 3
2025-06-05 16:01:09,007 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  it
2025-06-05 16:01:09,019 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:09,019 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 1
2025-06-05 16:01:09,019 - telephony_realtime_bridge - DEBUG - Received audio transcript delta: .
2025-06-05 16:01:09,020 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:09,020 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 6
2025-06-05 16:01:09,020 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  Since
2025-06-05 16:01:09,031 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:09,032 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 5
2025-06-05 16:01:09,032 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  your
2025-06-05 16:01:09,108 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-05 16:01:09,108 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 6400
2025-06-05 16:01:09,108 - telephony_realtime_bridge - INFO - Started play stream: 5d1932da-8c07-49d4-a635-75b6420a807a
2025-06-05 16:01:09,108 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.start
2025-06-05 16:01:09,108 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 2400 -> 1600 samples, 100.0ms -> 100.0ms
2025-06-05 16:01:09,108 - multi_turn_test - INFO - [MOCK] Play stream started: 5d1932da-8c07-49d4-a635-75b6420a807a
2025-06-05 16:01:09,108 - multi_turn_test - INFO - [MOCK] Collecting response audio...
2025-06-05 16:01:09,108 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 6400 bytes)
2025-06-05 16:01:09,108 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-05 16:01:09,108 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (6400 bytes base64)
2025-06-05 16:01:09,131 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-05 16:01:09,131 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 9600
2025-06-05 16:01:09,132 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 3600 -> 2400 samples, 150.0ms -> 150.0ms
2025-06-05 16:01:09,133 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 9600 bytes)
2025-06-05 16:01:09,133 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-05 16:01:09,134 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (9600 bytes base64)
2025-06-05 16:01:09,166 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-05 16:01:09,166 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 16000
2025-06-05 16:01:09,166 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 6000 -> 4000 samples, 250.0ms -> 250.0ms
2025-06-05 16:01:09,166 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
000 bytes)
2025-06-05 16:01:09,166 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (16000 bytes base64)
2025-06-05 16:01:09,166 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:09,166 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 5
2025-06-05 16:01:09,166 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  Gold
2025-06-05 16:01:09,180 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:09,180 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 5
2025-06-05 16:01:09,180 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  card
2025-06-05 16:01:09,193 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:09,193 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 3
2025-06-05 16:01:09,193 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  is
2025-06-05 16:01:09,254 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-05 16:01:09,254 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 16000
2025-06-05 16:01:09,254 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 6000 -> 4000 samples, 250.0ms -> 250.0ms
2025-06-05 16:01:09,258 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 16000 bytes)
2025-06-05 16:01:09,258 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-05 16:01:09,258 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (16000 bytes base64)
2025-06-05 16:01:09,281 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-05 16:01:09,281 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 16000
2025-06-05 16:01:09,281 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 6000 -> 4000 samples, 250.0ms -> 250.0ms
2025-06-05 16:01:09,281 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 16000 bytes)
2025-06-05 16:01:09,281 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-05 16:01:09,281 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (16000 bytes base64)
2025-06-05 16:01:09,322 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:09,322 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 5
2025-06-05 16:01:09,322 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  lost
2025-06-05 16:01:09,328 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:09,328 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 1
2025-06-05 16:01:09,328 - telephony_realtime_bridge - DEBUG - Received audio transcript delta: ,
2025-06-05 16:01:09,335 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:09,335 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 3
2025-06-05 16:01:09,342 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  we
2025-06-05 16:01:09,391 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-05 16:01:09,391 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 16000
2025-06-05 16:01:09,391 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 6000 -> 4000 samples, 250.0ms -> 250.0ms
2025-06-05 16:01:09,407 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 16000 bytes)
2025-06-05 16:01:09,407 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-05 16:01:09,407 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (16000 bytes base64)
2025-06-05 16:01:09,480 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-05 16:01:09,480 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 32000
2025-06-05 16:01:09,480 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 12000 -> 8000 samples, 500.0ms -> 500.0ms
2025-06-05 16:01:09,480 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 32000 bytes)
2025-06-05 16:01:09,480 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:09,480 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-05 16:01:09,480 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 3
2025-06-05 16:01:09,480 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (32000 bytes base64)
2025-06-05 16:01:09,480 - telephony_realtime_bridge - DEBUG - Received audio transcript delta: 'll
2025-06-05 16:01:09,480 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:09,480 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 8
2025-06-05 16:01:09,480 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  proceed
2025-06-05 16:01:09,645 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:09,645 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 5
2025-06-05 16:01:09,645 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  with
2025-06-05 16:01:09,661 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:09,661 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 4
2025-06-05 16:01:09,663 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  the
2025-06-05 16:01:09,663 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:09,663 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 12
2025-06-05 16:01:09,663 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  replacement
2025-06-05 16:01:09,663 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:09,663 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 1
2025-06-05 16:01:09,663 - telephony_realtime_bridge - DEBUG - Received audio transcript delta: .
2025-06-05 16:01:09,663 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:09,663 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 6
2025-06-05 16:01:09,663 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  Could
2025-06-05 16:01:09,671 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-05 16:01:09,671 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 48000
2025-06-05 16:01:09,671 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 18000 -> 12000 samples, 750.0ms -> 750.0ms
2025-06-05 16:01:09,675 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 48000 bytes)
2025-06-05 16:01:09,676 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-05 16:01:09,676 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (48000 bytes base64)
2025-06-05 16:01:09,785 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:09,785 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 4
2025-06-05 16:01:09,785 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  you
2025-06-05 16:01:09,790 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:09,790 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 7
2025-06-05 16:01:09,791 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  please
2025-06-05 16:01:09,802 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:09,804 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 8
2025-06-05 16:01:09,804 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  confirm
2025-06-05 16:01:09,810 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:09,811 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 4
2025-06-05 16:01:09,811 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  the
2025-06-05 16:01:09,811 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:09,811 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 8
2025-06-05 16:01:09,812 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  address
2025-06-05 16:01:09,823 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:09,823 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 6
2025-06-05 16:01:09,823 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  where
2025-06-05 16:01:09,825 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:09,825 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 4
2025-06-05 16:01:09,825 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  you
2025-06-05 16:01:09,835 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:09,835 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 6
2025-06-05 16:01:09,836 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  would
2025-06-05 16:01:09,841 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:09,842 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 5
2025-06-05 16:01:09,842 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  like
2025-06-05 16:01:09,915 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-05 16:01:09,915 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 64000
2025-06-05 16:01:09,917 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 24000 -> 16000 samples, 1000.0ms -> 1000.0ms
2025-06-05 16:01:09,921 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 64000 bytes)
2025-06-05 16:01:09,922 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-05 16:01:09,922 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (64000 bytes base64)
2025-06-05 16:01:10,071 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-05 16:01:10,071 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 64000
2025-06-05 16:01:10,072 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 24000 -> 16000 samples, 1000.0ms -> 1000.0ms
2025-06-05 16:01:10,077 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 64000 bytes)
2025-06-05 16:01:10,077 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-05 16:01:10,078 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (64000 bytes base64)
2025-06-05 16:01:10,227 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-05 16:01:10,227 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 64000
2025-06-05 16:01:10,228 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 24000 -> 16000 samples, 1000.0ms -> 1000.0ms
2025-06-05 16:01:10,232 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 64000 bytes)
2025-06-05 16:01:10,232 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:10,232 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-05 16:01:10,232 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 4
2025-06-05 16:01:10,233 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  the

2025-06-05 16:01:10,233 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:10,233 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 4
2025-06-05 16:01:10,234 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  new
2025-06-05 16:01:10,235 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:10,235 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 5
2025-06-05 16:01:10,235 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  card
2025-06-05 16:01:10,239 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:10,239 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 3
2025-06-05 16:01:10,239 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  to
2025-06-05 16:01:10,244 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:10,244 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 3
2025-06-05 16:01:10,245 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  be
2025-06-05 16:01:10,251 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:10,251 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 10
2025-06-05 16:01:10,251 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  delivered
2025-06-05 16:01:10,268 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:10,269 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 1
2025-06-05 16:01:10,269 - telephony_realtime_bridge - DEBUG - Received audio transcript delta: ?
2025-06-05 16:01:10,453 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-05 16:01:10,454 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 64000
2025-06-05 16:01:10,455 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 24000 -> 16000 samples, 1000.0ms -> 1000.0ms
2025-06-05 16:01:10,458 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 64000 bytes)
2025-06-05 16:01:10,459 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-05 16:01:10,459 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (64000 bytes base64)
2025-06-05 16:01:10,610 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-05 16:01:10,610 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 64000
2025-06-05 16:01:10,610 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 24000 -> 16000 samples, 1000.0ms -> 1000.0ms
2025-06-05 16:01:10,613 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 64000 bytes)
2025-06-05 16:01:10,614 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-05 16:01:10,614 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (64000 bytes base64)
2025-06-05 16:01:10,771 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-05 16:01:10,771 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 95064
2025-06-05 16:01:10,771 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 35648 -> 23765 samples, 1485.3ms -> 1485.3ms
2025-06-05 16:01:10,778 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 95064 bytes)
2025-06-05 16:01:10,778 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-05 16:01:10,779 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (95064 bytes base64)
2025-06-05 16:01:10,792 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.done
2025-06-05 16:01:10,792 - telephony_realtime_bridge - INFO - Audio response completed
2025-06-05 16:01:10,793 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.stop
2025-06-05 16:01:10,793 - multi_turn_test - INFO - [MOCK] Response collected: 14 chunks
2025-06-05 16:01:10,793 - telephony_realtime_bridge - INFO - Stopped play stream: 5d1932da-8c07-49d4-a635-75b6420a807a
2025-06-05 16:01:10,793 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.done
2025-06-05 16:01:10,793 - multi_turn_test - INFO - [MOCK] Play stream stopped: 5d1932da-8c07-49d4-a635-75b6420a807a
2025-06-05 16:01:10,794 - telephony_realtime_bridge - INFO - Full AI transcript (output audio): Got it. Since your Gold card is lost, we'll proceed with the replacement. Could you please confirm the address where you would like the new card to be delivered?
2025-06-05 16:01:10,794 - call_recorder - INFO - Transcript added: [bot] Got it. Since your Gold card is lost, we'll procee...
2025-06-05 16:01:10,794 - telephony_realtime_bridge - INFO - Audio transcript completed
2025-06-05 16:01:10,794 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.content_part.done
2025-06-05 16:01:10,795 - telephony_realtime_bridge - INFO - Content part completed
2025-06-05 16:01:10,795 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.output_item.done
2025-06-05 16:01:10,795 - telephony_realtime_bridge - INFO - Output item completed
2025-06-05 16:01:10,795 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.done
2025-06-05 16:01:10,795 - telephony_realtime_bridge - INFO - Response event details: {
  "type": "response.done",
  "event_id": "event_BfDs3kCSvfyLhalJxpn5E",
  "response": {
    "object": "realtime.response",
    "id": "resp_BfDs1qciiOrRhqKA4gPz2",
    "status": "completed",
    "status_details": null,
    "output": [
      {
        "id": "item_BfDs16Qb6S61wtaBz9CUy",
        "object": "realtime.item",
        "type": "message",
        "status": "completed",
        "role": "assistant",
        "content": [
          {
            "type": "audio",
            "transcript": "Got it. Since your Gold card is lost, we'll proceed with the replacement. Could you please confirm the address where you would like the new card to be delivered?"
          }
        ]
      }
    ],
    "conversation_id": "conv_BfDrlBNrWFCU1HcoQqgWa",
    "modalities": [
      "audio",
      "text"
    ],
    "voice": "alloy",
    "output_audio_format": "pcm16",
    "temperature": 0.8,
    "max_output_tokens": 4096,
    "usage": {
      "total_tokens": 1589,
      "input_tokens": 1361,
      "output_tokens": 228,
      "input_token_details": {
        "text_tokens": 951,
        "audio_tokens": 410,
        "cached_tokens": 1088,
        "cached_tokens_details": {
          "text_tokens": 768,
          "audio_tokens": 320
        }
      },
      "output_token_details": {
        "text_tokens": 50,
        "audio_tokens": 178
      }
    },
    "metadata": null
  }
}
2025-06-05 16:01:10,796 - telephony_realtime_bridge - INFO - Received OpenAI message type: rate_limits.updated
2025-06-05 16:01:10,838 - multi_turn_test - INFO - [MOCK] Response received: 14 chunks
2025-06-05 16:01:10,838 - multi_turn_test - INFO - [MOCK] Turn 3: AI response received (14 chunks)
2025-06-05 16:01:10,842 - multi_turn_test - INFO - [MOCK] Saved audio: turn_03_response_8494a38b.wav (13.48s)
2025-06-05 16:01:10,842 - multi_turn_test - INFO - [MOCK] Waiting 2.0s before next turn...
2025-06-05 16:01:12,846 - multi_turn_test - INFO - 
[MOCK] === Turn 4/5 ===
2025-06-05 16:01:12,846 - multi_turn_test - INFO - [MOCK] Sending: yes_that_address.wav
2025-06-05 16:01:12,846 - multi_turn_test - INFO - [MOCK] Loading audio: yes_that_address.wav
2025-06-05 16:01:12,846 - multi_turn_test - INFO -    Format: 1ch, 16bit, 24000Hz
2025-06-05 16:01:13,252 - multi_turn_test - INFO -    Resampling from 24000Hz to 16000Hz...
2025-06-05 16:01:13,276 - multi_turn_test - INFO -    Split into 2 chunks (~1.54s total)
2025-06-05 16:01:13,277 - multi_turn_test - INFO - [MOCK] Sending user audio: yes_that_address.wav (2 chunks)
2025-06-05 16:01:13,277 - telephony_realtime_bridge - INFO - Received telephony message: userStream.start
2025-06-05 16:01:13,277 - telephony_realtime_bridge - INFO - User stream start received: {'type': 'userStream.start', 'conversationId': '8494a38b-64e6-4bf0-ab89-6dfa4fbf755e'}
2025-06-05 16:01:13,277 - telephony_realtime_bridge - INFO - User stream started for conversation: 8494a38b-64e6-4bf0-ab89-6dfa4fbf755e
2025-06-05 16:01:13,277 - multi_turn_test - INFO - [MOCK] Received from bridge: userStream.started
2025-06-05 16:01:13,277 - multi_turn_test - INFO - [MOCK] User stream started
2025-06-05 16:01:13,391 - multi_turn_test - DEBUG - [MOCK] Sent chunk 1/2
2025-06-05 16:01:13,391 - telephony_realtime_bridge - INFO - Received telephony message: userStream.chunk with audio chunk size: 42668 bytes
2025-06-05 16:01:13,398 - telephony_realtime_bridge - DEBUG - Processing audio chunk #1: 32000 -> 32000 bytes (~1000.0ms of audio). Total sent: 32000 bytes
2025-06-05 16:01:13,398 - telephony_realtime_bridge - DEBUG - Sending audio to realtime-websocket (size: 42668 bytes base64)
2025-06-05 16:01:13,432 - multi_turn_test - DEBUG - [MOCK] Sent chunk 2/2
2025-06-05 16:01:13,432 - telephony_realtime_bridge - INFO - Received telephony message: userStream.chunk with audio chunk size: 22936 bytes
2025-06-05 16:01:13,432 - telephony_realtime_bridge - DEBUG - Processing audio chunk #2: 17200 -> 17200 bytes (~537.5ms of audio). Total sent: 49200 bytes
2025-06-05 16:01:13,432 - telephony_realtime_bridge - DEBUG - Sending audio to realtime-websocket (size: 22936 bytes base64)
2025-06-05 16:01:13,455 - multi_turn_test - INFO - [MOCK] User audio sent successfully
2025-06-05 16:01:13,455 - multi_turn_test - INFO - [MOCK] Turn 4: User audio sent successfully
2025-06-05 16:01:13,455 - telephony_realtime_bridge - INFO - Received telephony message: userStream.stop
2025-06-05 16:01:13,455 - telephony_realtime_bridge - INFO - User stream stop received for conversation: 8494a38b-64e6-4bf0-ab89-6dfa4fbf755e
2025-06-05 16:01:13,455 - telephony_realtime_bridge - INFO - Buffer state before commit: 2 chunks, 49200 bytes (~1537.5ms of audio)
2025-06-05 16:01:13,456 - telephony_realtime_bridge - INFO - realtime_websocket_object: <bound method Connection.send of <websockets.asyncio.client.ClientConnection object at 0x0000025C7AF9B410>>
2025-06-05 16:01:13,456 - telephony_realtime_bridge - INFO - Audio buffer committed with 2 chunks (49200 bytes)
2025-06-05 16:01:13,456 - telephony_realtime_bridge - INFO - Audio buffer commit sent: {"type":"input_audio_buffer.commit","event_id":null}
2025-06-05 16:01:13,456 - telephony_realtime_bridge - INFO - Response creation triggered after audio buffer commit
2025-06-05 16:01:13,456 - multi_turn_test - INFO - [MOCK] Received from bridge: userStream.stopped
2025-06-05 16:01:13,456 - multi_turn_test - INFO - [MOCK] User stream stopped
2025-06-05 16:01:13,644 - telephony_realtime_bridge - INFO - Received OpenAI message type: input_audio_buffer.committed
2025-06-05 16:01:13,644 - telephony_realtime_bridge - INFO - Received OpenAI message type: conversation.item.created
2025-06-05 16:01:13,644 - telephony_realtime_bridge - INFO - Conversation item created
2025-06-05 16:01:13,660 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.created
2025-06-05 16:01:13,660 - telephony_realtime_bridge - INFO - Response event details: {
  "type": "response.created",
  "event_id": "event_BfDs6HWbhd0gBSrg38K0Y",
  "response": {
    "object": "realtime.response",
    "id": "resp_BfDs6dd5Y0iT1lUBa0PIl",
    "status": "in_progress",
    "status_details": null,
    "output": [],
    "conversation_id": "conv_BfDrlBNrWFCU1HcoQqgWa",
    "modalities": [
      "audio",
      "text"
    ],
    "voice": "alloy",
    "output_audio_format": "pcm16",
    "temperature": 0.8,
    "max_output_tokens": 4096,
    "usage": null,
    "metadata": null
  }
}
2025-06-05 16:01:13,660 - telephony_realtime_bridge - INFO - Response creation started
2025-06-05 16:01:14,040 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.output_item.added
2025-06-05 16:01:14,040 - telephony_realtime_bridge - INFO - Output item added: {
  "id": "item_BfDs6SZw9hqDBdzISsBpQ",
  "object": "realtime.item",
  "type": "function_call",
  "status": "in_progress",
  "name": "confirm_address",
  "call_id": "call_2ArrQCtVQ4XJXYcf",
  "arguments": ""
}
2025-06-05 16:01:14,041 - telephony_realtime_bridge - INFO - Output item added: {'id': 'item_BfDs6SZw9hqDBdzISsBpQ', 'object': 'realtime.item', 'type': 'function_call', 'status': 'in_progress', 'name': 'confirm_address', 'call_id': 'call_2ArrQCtVQ4XJXYcf', 'arguments': ''}
2025-06-05 16:01:14,042 - telephony_realtime_bridge - INFO - Captured function call: confirm_address with call_id: call_2ArrQCtVQ4XJXYcf
2025-06-05 16:01:14,042 - telephony_realtime_bridge - INFO - Received OpenAI message type: conversation.item.created
2025-06-05 16:01:14,042 - telephony_realtime_bridge - INFO - Conversation item created
2025-06-05 16:01:14,043 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.function_call_arguments.delta
2025-06-05 16:01:14,043 - telephony_realtime_bridge - INFO - 🎯 Routing response.function_call_arguments.delta to handler
2025-06-05 16:01:14,047 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.function_call_arguments.delta
2025-06-05 16:01:14,047 - telephony_realtime_bridge - INFO - 🎯 Routing response.function_call_arguments.delta to handler
2025-06-05 16:01:14,053 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.function_call_arguments.delta
2025-06-05 16:01:14,053 - telephony_realtime_bridge - INFO - 🎯 Routing response.function_call_arguments.delta to handler
2025-06-05 16:01:14,059 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.function_call_arguments.delta
2025-06-05 16:01:14,059 - telephony_realtime_bridge - INFO - 🎯 Routing response.function_call_arguments.delta to handler
2025-06-05 16:01:14,068 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.function_call_arguments.delta
2025-06-05 16:01:14,068 - telephony_realtime_bridge - INFO - 🎯 Routing response.function_call_arguments.delta to handler
2025-06-05 16:01:14,076 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.function_call_arguments.delta
2025-06-05 16:01:14,076 - telephony_realtime_bridge - INFO - 🎯 Routing response.function_call_arguments.delta to handler
2025-06-05 16:01:14,084 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.function_call_arguments.delta
2025-06-05 16:01:14,084 - telephony_realtime_bridge - INFO - 🎯 Routing response.function_call_arguments.delta to handler
2025-06-05 16:01:14,093 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.function_call_arguments.delta
2025-06-05 16:01:14,094 - telephony_realtime_bridge - INFO - 🎯 Routing response.function_call_arguments.delta to handler
2025-06-05 16:01:14,099 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.function_call_arguments.delta
2025-06-05 16:01:14,099 - telephony_realtime_bridge - INFO - 🎯 Routing response.function_call_arguments.delta to handler
2025-06-05 16:01:14,108 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.function_call_arguments.delta
2025-06-05 16:01:14,108 - telephony_realtime_bridge - INFO - 🎯 Routing response.function_call_arguments.delta to handler
2025-06-05 16:01:14,117 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.function_call_arguments.delta
2025-06-05 16:01:14,117 - telephony_realtime_bridge - INFO - 🎯 Routing response.function_call_arguments.delta to handler
2025-06-05 16:01:14,123 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.function_call_arguments.delta
2025-06-05 16:01:14,124 - telephony_realtime_bridge - INFO - 🎯 Routing response.function_call_arguments.delta to handler
2025-06-05 16:01:14,130 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.function_call_arguments.delta
2025-06-05 16:01:14,131 - telephony_realtime_bridge - INFO - 🎯 Routing response.function_call_arguments.delta to handler
2025-06-05 16:01:14,139 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.function_call_arguments.delta
2025-06-05 16:01:14,139 - telephony_realtime_bridge - INFO - 🎯 Routing response.function_call_arguments.delta to handler
2025-06-05 16:01:14,148 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.function_call_arguments.delta
2025-06-05 16:01:14,149 - telephony_realtime_bridge - INFO - 🎯 Routing response.function_call_arguments.delta to handler
2025-06-05 16:01:14,162 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.function_call_arguments.delta
2025-06-05 16:01:14,162 - telephony_realtime_bridge - INFO - 🎯 Routing response.function_call_arguments.delta to handler
2025-06-05 16:01:14,163 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.function_call_arguments.delta
2025-06-05 16:01:14,163 - telephony_realtime_bridge - INFO - 🎯 Routing response.function_call_arguments.delta to handler
2025-06-05 16:01:14,168 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.function_call_arguments.delta
2025-06-05 16:01:14,168 - telephony_realtime_bridge - INFO - 🎯 Routing response.function_call_arguments.delta to handler
2025-06-05 16:01:14,196 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.function_call_arguments.done
2025-06-05 16:01:14,197 - telephony_realtime_bridge - INFO - 🎯 Routing response.function_call_arguments.done to handler
2025-06-05 16:01:14,197 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.output_item.done
2025-06-05 16:01:14,197 - telephony_realtime_bridge - INFO - Output item completed
2025-06-05 16:01:14,197 - call_recorder - INFO - Function call logged: confirm_address
2025-06-05 16:01:14,201 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.done
2025-06-05 16:01:14,201 - telephony_realtime_bridge - INFO - Response event details: {
  "type": "response.done",
  "event_id": "event_BfDs6KhKVu6YKmB5b5tcU",
  "response": {
    "object": "realtime.response",
    "id": "resp_BfDs6dd5Y0iT1lUBa0PIl",
    "status": "completed",
    "status_details": null,
    "output": [
      {
        "id": "item_BfDs6SZw9hqDBdzISsBpQ",
        "object": "realtime.item",
        "type": "function_call",
        "status": "completed",
        "name": "confirm_address",
        "call_id": "call_2ArrQCtVQ4XJXYcf",
        "arguments": "{\"card_in_context\":\"Gold card\",\"address_on_file\":\"[Your Current Address]\"}"
      }
    ],
    "conversation_id": "conv_BfDrlBNrWFCU1HcoQqgWa",
    "modalities": [
      "audio",
      "text"
    ],
    "voice": "alloy",
    "output_audio_format": "pcm16",
    "temperature": 0.8,
    "max_output_tokens": 4096,
    "usage": {
      "total_tokens": 1637,
      "input_tokens": 1609,
      "output_tokens": 28,
      "input_token_details": {
        "text_tokens": 1011,
        "audio_tokens": 598,
        "cached_tokens": 1472,
        "cached_tokens_details": {
          "text_tokens": 960,
          "audio_tokens": 512
        }
      },
      "output_token_details": {
        "text_tokens": 28,
        "audio_tokens": 0
      }
    },
    "metadata": null
  }
}
2025-06-05 16:01:14,206 - telephony_realtime_bridge - INFO - Received OpenAI message type: rate_limits.updated
2025-06-05 16:01:14,267 - telephony_realtime_bridge - INFO - Received OpenAI message type: conversation.item.created
2025-06-05 16:01:14,268 - telephony_realtime_bridge - INFO - Conversation item created
2025-06-05 16:01:14,272 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.created
2025-06-05 16:01:14,273 - telephony_realtime_bridge - INFO - Response event details: {
  "type": "response.created",
  "event_id": "event_BfDs6wBmmQIvoAro45btx",
  "response": {
    "object": "realtime.response",
    "id": "resp_BfDs6UWFYwYRhUQhN5KQz",
    "status": "in_progress",
    "status_details": null,
    "output": [],
    "conversation_id": "conv_BfDrlBNrWFCU1HcoQqgWa",
    "modalities": [
      "audio",
      "text"
    ],
    "voice": "alloy",
    "output_audio_format": "pcm16",
    "temperature": 0.8,
    "max_output_tokens": 4096,
    "usage": null,
    "metadata": null
  }
}
2025-06-05 16:01:14,273 - telephony_realtime_bridge - INFO - Response creation started
2025-06-05 16:01:14,748 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.output_item.added
2025-06-05 16:01:14,749 - telephony_realtime_bridge - INFO - Output item added: {
  "id": "item_BfDs6RIReO0LKmjY1ZC3N",
  "object": "realtime.item",
  "type": "message",
  "status": "in_progress",
  "role": "assistant",
  "content": []
}
2025-06-05 16:01:14,749 - telephony_realtime_bridge - INFO - Output item added: {'id': 'item_BfDs6RIReO0LKmjY1ZC3N', 'object': 'realtime.item', 'type': 'message', 'status': 'in_progress', 'role': 'assistant', 'content': []}
2025-06-05 16:01:14,750 - telephony_realtime_bridge - INFO - Received OpenAI message type: conversation.item.created
2025-06-05 16:01:14,750 - telephony_realtime_bridge - INFO - Conversation item created
2025-06-05 16:01:14,754 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.content_part.added
2025-06-05 16:01:14,754 - telephony_realtime_bridge - INFO - Content part added: {
  "type": "audio",
  "transcript": ""
}
2025-06-05 16:01:14,754 - telephony_realtime_bridge - INFO - Content part added: {'type': 'audio', 'transcript': ''}
2025-06-05 16:01:14,759 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:14,759 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 5
2025-06-05 16:01:14,759 - telephony_realtime_bridge - DEBUG - Received audio transcript delta: Thank
2025-06-05 16:01:14,763 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:14,763 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 4
2025-06-05 16:01:14,763 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  you
2025-06-05 16:01:14,770 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:14,770 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 4
2025-06-05 16:01:14,771 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  for
2025-06-05 16:01:14,780 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:14,780 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 11
2025-06-05 16:01:14,780 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  confirming
2025-06-05 16:01:14,785 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:14,785 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 1
2025-06-05 16:01:14,785 - telephony_realtime_bridge - DEBUG - Received audio transcript delta: .
2025-06-05 16:01:14,847 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-05 16:01:14,847 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 6400
2025-06-05 16:01:14,847 - telephony_realtime_bridge - INFO - Started play stream: 6e2b93d8-285d-4592-97b3-d7ddcde0e439
2025-06-05 16:01:14,847 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.start
2025-06-05 16:01:14,847 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 2400 -> 1600 samples, 100.0ms -> 100.0ms
2025-06-05 16:01:14,847 - multi_turn_test - INFO - [MOCK] Play stream started: 6e2b93d8-285d-4592-97b3-d7ddcde0e439
2025-06-05 16:01:14,847 - multi_turn_test - INFO - [MOCK] Collecting response audio...
2025-06-05 16:01:14,847 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 6400 bytes)
2025-06-05 16:01:14,847 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-05 16:01:14,847 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (6400 bytes base64)
2025-06-05 16:01:14,908 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-05 16:01:14,909 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 9600
2025-06-05 16:01:14,910 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 3600 -> 2400 samples, 150.0ms -> 150.0ms
2025-06-05 16:01:14,911 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 9600 bytes)
2025-06-05 16:01:14,911 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-05 16:01:14,911 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (9600 bytes base64)
2025-06-05 16:01:14,943 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-05 16:01:14,943 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 16000
2025-06-05 16:01:14,944 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 6000 -> 4000 samples, 250.0ms -> 250.0ms
2025-06-05 16:01:14,945 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 16000 bytes)
2025-06-05 16:01:14,945 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-05 16:01:14,945 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (16000 bytes base64)
2025-06-05 16:01:14,945 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:14,945 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 2
2025-06-05 16:01:14,945 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  I
2025-06-05 16:01:14,989 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-05 16:01:14,989 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 16000
2025-06-05 16:01:14,989 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 6000 -> 4000 samples, 250.0ms -> 250.0ms
2025-06-05 16:01:14,989 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 16000 bytes)
2025-06-05 16:01:14,989 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-05 16:01:14,989 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (16000 bytes base64)
2025-06-05 16:01:15,022 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-05 16:01:15,022 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 16000
2025-06-05 16:01:15,028 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 6000 -> 4000 samples, 250.0ms -> 250.0ms
2025-06-05 16:01:15,030 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 16000 bytes)
2025-06-05 16:01:15,030 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-05 16:01:15,030 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (16000 bytes base64)
2025-06-05 16:01:15,066 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:15,066 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 3
2025-06-05 16:01:15,066 - telephony_realtime_bridge - DEBUG - Received audio transcript delta: 'll
2025-06-05 16:01:15,077 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:15,077 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 8
2025-06-05 16:01:15,078 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  proceed
2025-06-05 16:01:15,082 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:15,083 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 5
2025-06-05 16:01:15,083 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  with
2025-06-05 16:01:15,136 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-05 16:01:15,136 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 16000
2025-06-05 16:01:15,136 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 6000 -> 4000 samples, 250.0ms -> 250.0ms
2025-06-05 16:01:15,136 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 16000 bytes)
2025-06-05 16:01:15,136 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-05 16:01:15,136 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (16000 bytes base64)
2025-06-05 16:01:15,226 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-05 16:01:15,226 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 32000
2025-06-05 16:01:15,227 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 12000 -> 8000 samples, 500.0ms -> 500.0ms
2025-06-05 16:01:15,229 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 32000 bytes)
2025-06-05 16:01:15,229 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-05 16:01:15,229 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:15,230 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (32000 bytes base64)
2025-06-05 16:01:15,230 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 10
2025-06-05 16:01:15,230 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  replacing
2025-06-05 16:01:15,231 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:15,231 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 5
2025-06-05 16:01:15,231 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  your
2025-06-05 16:01:15,239 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:15,239 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 5
2025-06-05 16:01:15,239 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  Gold
2025-06-05 16:01:15,246 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:15,246 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 5
2025-06-05 16:01:15,246 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  card
2025-06-05 16:01:15,254 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:15,255 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 4
2025-06-05 16:01:15,255 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  and
2025-06-05 16:01:15,261 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:15,261 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 5
2025-06-05 16:01:15,263 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  have
2025-06-05 16:01:15,279 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:15,280 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 3
2025-06-05 16:01:15,280 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  it
2025-06-05 16:01:15,280 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:15,280 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 5
2025-06-05 16:01:15,280 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  sent
2025-06-05 16:01:15,287 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:15,287 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 3
2025-06-05 16:01:15,287 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  to
2025-06-05 16:01:15,422 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-05 16:01:15,422 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 48000
2025-06-05 16:01:15,422 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 18000 -> 12000 samples, 750.0ms -> 750.0ms
2025-06-05 16:01:15,422 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 48000 bytes)
2025-06-05 16:01:15,422 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-05 16:01:15,436 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (48000 bytes base64)
2025-06-05 16:01:15,542 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:15,542 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 4
2025-06-05 16:01:15,542 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  the
2025-06-05 16:01:15,542 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:15,542 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 8
2025-06-05 16:01:15,542 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  address
2025-06-05 16:01:15,557 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:15,557 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 3
2025-06-05 16:01:15,558 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  on
2025-06-05 16:01:15,565 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:15,565 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 5
2025-06-05 16:01:15,565 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  file
2025-06-05 16:01:15,573 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:15,574 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 1
2025-06-05 16:01:15,574 - telephony_realtime_bridge - DEBUG - Received audio transcript delta: .
2025-06-05 16:01:15,581 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:15,581 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 7
2025-06-05 16:01:15,581 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  Please
2025-06-05 16:01:15,609 - telephony_realtime_bridge - INFO - Received OpenAI message type: conversation.item.input_audio_transcription.delta
2025-06-05 16:01:15,609 - telephony_realtime_bridge - DEBUG - Received input audio transcription delta: Yes, send it to that address.

2025-06-05 16:01:15,609 - telephony_realtime_bridge - INFO - Received OpenAI message type: conversation.item.input_audio_transcription.completed
2025-06-05 16:01:15,610 - telephony_realtime_bridge - INFO - Full user transcript (input audio): Yes, send it to that address.

2025-06-05 16:01:15,611 - call_recorder - INFO - Transcript added: [caller] Yes, send it to that address.
...
2025-06-05 16:01:15,611 - telephony_realtime_bridge - INFO - Input audio transcription completed
2025-06-05 16:01:15,654 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-05 16:01:15,654 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 64000
2025-06-05 16:01:15,655 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 24000 -> 16000 samples, 1000.0ms -> 1000.0ms
2025-06-05 16:01:15,658 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 64000 bytes)
2025-06-05 16:01:15,659 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-05 16:01:15,659 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (64000 bytes base64)
2025-06-05 16:01:15,808 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-05 16:01:15,808 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 64000
2025-06-05 16:01:15,809 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 24000 -> 16000 samples, 1000.0ms -> 1000.0ms
2025-06-05 16:01:15,812 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 64000 bytes)
2025-06-05 16:01:15,812 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-05 16:01:15,813 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (64000 bytes base64)
2025-06-05 16:01:15,957 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-05 16:01:15,957 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 64000
2025-06-05 16:01:15,957 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 24000 -> 16000 samples, 1000.0ms -> 1000.0ms
2025-06-05 16:01:15,972 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 64000 bytes)
2025-06-05 16:01:15,973 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:15,973 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-05 16:01:15,973 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 6
2025-06-05 16:01:15,974 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (64000 bytes base64)
2025-06-05 16:01:15,974 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  allow
2025-06-05 16:01:15,975 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:15,975 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 2
2025-06-05 16:01:15,975 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  a
2025-06-05 16:01:15,975 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:15,975 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 4
2025-06-05 16:01:15,975 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  few
2025-06-05 16:01:15,979 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:15,979 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 9
2025-06-05 16:01:15,980 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  business
2025-06-05 16:01:15,986 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:15,987 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 5
2025-06-05 16:01:15,987 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  days
2025-06-05 16:01:15,994 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:15,994 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 4
2025-06-05 16:01:15,994 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  for
2025-06-05 16:01:16,001 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:16,001 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 9
2025-06-05 16:01:16,002 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  delivery
2025-06-05 16:01:16,009 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:16,009 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 1
2025-06-05 16:01:16,009 - telephony_realtime_bridge - DEBUG - Received audio transcript delta: .
2025-06-05 16:01:16,016 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:16,016 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 3
2025-06-05 16:01:16,016 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  Is
2025-06-05 16:01:16,209 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-05 16:01:16,209 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 64000
2025-06-05 16:01:16,209 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 24000 -> 16000 samples, 1000.0ms -> 1000.0ms
2025-06-05 16:01:16,215 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 64000 bytes)
2025-06-05 16:01:16,215 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-05 16:01:16,218 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (64000 bytes base64)
2025-06-05 16:01:16,372 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-05 16:01:16,372 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 64000
2025-06-05 16:01:16,372 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 24000 -> 16000 samples, 1000.0ms -> 1000.0ms
2025-06-05 16:01:16,376 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 64000 bytes)
2025-06-05 16:01:16,378 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-05 16:01:16,379 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (64000 bytes base64)
2025-06-05 16:01:16,392 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:16,392 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 6
2025-06-05 16:01:16,393 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  there
2025-06-05 16:01:16,403 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:16,403 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 9
2025-06-05 16:01:16,404 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  anything
2025-06-05 16:01:16,407 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:16,407 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 5
2025-06-05 16:01:16,407 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  else
2025-06-05 16:01:16,414 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:16,415 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 2
2025-06-05 16:01:16,415 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  I
2025-06-05 16:01:16,423 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:16,423 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 4
2025-06-05 16:01:16,423 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  can
2025-06-05 16:01:16,429 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:16,429 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 7
2025-06-05 16:01:16,430 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  assist
2025-06-05 16:01:16,436 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:16,436 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 4
2025-06-05 16:01:16,436 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  you
2025-06-05 16:01:16,576 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-05 16:01:16,576 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 64000
2025-06-05 16:01:16,576 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 24000 -> 16000 samples, 1000.0ms -> 1000.0ms
2025-06-05 16:01:16,588 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 64000 bytes)
2025-06-05 16:01:16,588 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-05 16:01:16,588 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (64000 bytes base64)
2025-06-05 16:01:16,740 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-05 16:01:16,740 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 64000
2025-06-05 16:01:16,740 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 24000 -> 16000 samples, 1000.0ms -> 1000.0ms
2025-06-05 16:01:16,740 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 64000 bytes)
2025-06-05 16:01:16,740 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-05 16:01:16,740 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (64000 bytes base64)
2025-06-05 16:01:16,814 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:16,814 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 5
2025-06-05 16:01:16,814 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  with
2025-06-05 16:01:16,819 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:16,819 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 6
2025-06-05 16:01:16,819 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  today
2025-06-05 16:01:16,827 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:16,828 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 1
2025-06-05 16:01:16,828 - telephony_realtime_bridge - DEBUG - Received audio transcript delta: ?
2025-06-05 16:01:16,962 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-05 16:01:16,962 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 64000
2025-06-05 16:01:16,962 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 24000 -> 16000 samples, 1000.0ms -> 1000.0ms
2025-06-05 16:01:16,962 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 64000 bytes)
2025-06-05 16:01:16,962 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-05 16:01:16,975 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (64000 bytes base64)
2025-06-05 16:01:17,107 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-05 16:01:17,107 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 98264
2025-06-05 16:01:17,107 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 36848 -> 24565 samples, 1535.3ms -> 1535.3ms
2025-06-05 16:01:17,117 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 98264 bytes)
2025-06-05 16:01:17,117 - telephony_realtime_bridge - INFO - Received OpenAI message type: rate_limits.updated
2025-06-05 16:01:17,118 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-05 16:01:17,119 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (98264 bytes base64)
2025-06-05 16:01:17,131 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.done
2025-06-05 16:01:17,131 - telephony_realtime_bridge - INFO - Audio response completed
2025-06-05 16:01:17,131 - telephony_realtime_bridge - INFO - Stopped play stream: 6e2b93d8-285d-4592-97b3-d7ddcde0e439
2025-06-05 16:01:17,132 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.done
2025-06-05 16:01:17,132 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.stop
2025-06-05 16:01:17,132 - telephony_realtime_bridge - INFO - Full AI transcript (output audio): Thank you for confirming. I'll proceed with replacing your Gold card and have it sent to the address on file. Please allow a few business days for delivery. Is there anything else I can assist you with today?
2025-06-05 16:01:17,132 - multi_turn_test - INFO - [MOCK] Response collected: 17 chunks
2025-06-05 16:01:17,132 - call_recorder - INFO - Transcript added: [bot] Thank you for confirming. I'll proceed with replac...
2025-06-05 16:01:17,132 - multi_turn_test - INFO - [MOCK] Play stream stopped: 6e2b93d8-285d-4592-97b3-d7ddcde0e439
2025-06-05 16:01:17,132 - telephony_realtime_bridge - INFO - Audio transcript completed
2025-06-05 16:01:17,132 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.content_part.done
2025-06-05 16:01:17,132 - telephony_realtime_bridge - INFO - Content part completed
2025-06-05 16:01:17,133 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.output_item.done
2025-06-05 16:01:17,133 - telephony_realtime_bridge - INFO - Output item completed
2025-06-05 16:01:17,133 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.done
2025-06-05 16:01:17,133 - telephony_realtime_bridge - INFO - Response event details: {
  "type": "response.done",
  "event_id": "event_BfDs9IZGwjt6ckV5oxjJT",
  "response": {
    "object": "realtime.response",
    "id": "resp_BfDs6UWFYwYRhUQhN5KQz",
    "status": "completed",
    "status_details": null,
    "output": [
      {
        "id": "item_BfDs6RIReO0LKmjY1ZC3N",
        "object": "realtime.item",
        "type": "message",
        "status": "completed",
        "role": "assistant",
        "content": [
          {
            "type": "audio",
            "transcript": "Thank you for confirming. I'll proceed with replacing your Gold card and have it sent to the address on file. Please allow a few business days for delivery. Is there anything else I can assist you with today?"
          }
        ]
      }
    ],
    "conversation_id": "conv_BfDrlBNrWFCU1HcoQqgWa",
    "modalities": [
      "audio",
      "text"
    ],
    "voice": "alloy",
    "output_audio_format": "pcm16",
    "temperature": 0.8,
    "max_output_tokens": 4096,
    "usage": {
      "total_tokens": 2076,
      "input_tokens": 1774,
      "output_tokens": 302,
      "input_token_details": {
        "text_tokens": 1176,
        "audio_tokens": 598,
        "cached_tokens": 0,
        "cached_tokens_details": {
          "text_tokens": 0,
          "audio_tokens": 0
        }
      },
      "output_token_details": {
        "text_tokens": 63,
        "audio_tokens": 239
      }
    },
    "metadata": null
  }
}
2025-06-05 16:01:17,187 - multi_turn_test - INFO - [MOCK] Response received: 17 chunks
2025-06-05 16:01:17,187 - multi_turn_test - INFO - [MOCK] Turn 4: AI response received (17 chunks)
2025-06-05 16:01:17,192 - multi_turn_test - INFO - [MOCK] Saved audio: turn_04_response_8494a38b.wav (18.05s)
2025-06-05 16:01:17,192 - multi_turn_test - INFO - [MOCK] Waiting 2.0s before next turn...
2025-06-05 16:01:19,203 - multi_turn_test - INFO - 
[MOCK] === Turn 5/5 ===
2025-06-05 16:01:19,203 - multi_turn_test - INFO - [MOCK] Sending: thanks_thats_all.wav
2025-06-05 16:01:19,203 - multi_turn_test - INFO - [MOCK] Loading audio: thanks_thats_all.wav
2025-06-05 16:01:19,203 - multi_turn_test - INFO -    Format: 1ch, 16bit, 24000Hz
2025-06-05 16:01:19,618 - multi_turn_test - INFO -    Resampling from 24000Hz to 16000Hz...
2025-06-05 16:01:19,634 - multi_turn_test - INFO -    Split into 1 chunks (~0.93s total)
2025-06-05 16:01:19,634 - multi_turn_test - INFO - [MOCK] Sending user audio: thanks_thats_all.wav (1 chunks)
2025-06-05 16:01:19,634 - telephony_realtime_bridge - INFO - Received telephony message: userStream.start
2025-06-05 16:01:19,648 - telephony_realtime_bridge - INFO - User stream start received: {'type': 'userStream.start', 'conversationId': '8494a38b-64e6-4bf0-ab89-6dfa4fbf755e'}
2025-06-05 16:01:19,648 - telephony_realtime_bridge - INFO - User stream started for conversation: 8494a38b-64e6-4bf0-ab89-6dfa4fbf755e
2025-06-05 16:01:19,648 - multi_turn_test - INFO - [MOCK] Received from bridge: userStream.started
2025-06-05 16:01:19,649 - multi_turn_test - INFO - [MOCK] User stream started
2025-06-05 16:01:19,745 - multi_turn_test - DEBUG - [MOCK] Sent chunk 1/1
2025-06-05 16:01:19,745 - telephony_realtime_bridge - INFO - Received telephony message: userStream.chunk with audio chunk size: 39468 bytes
2025-06-05 16:01:19,745 - telephony_realtime_bridge - DEBUG - Processing audio chunk #1: 29600 -> 29600 bytes (~925.0ms of audio). Total sent: 29600 bytes
2025-06-05 16:01:19,745 - telephony_realtime_bridge - DEBUG - Sending audio to realtime-websocket (size: 39468 bytes base64)
2025-06-05 16:01:19,780 - multi_turn_test - INFO - [MOCK] User audio sent successfully
2025-06-05 16:01:19,780 - multi_turn_test - INFO - [MOCK] Turn 5: User audio sent successfully
2025-06-05 16:01:19,780 - telephony_realtime_bridge - INFO - Received telephony message: userStream.stop
2025-06-05 16:01:19,781 - multi_turn_test - INFO - [MOCK] Waiting for LLM response...
2025-06-05 16:01:19,781 - telephony_realtime_bridge - INFO - User stream stop received for conversation: 8494a38b-64e6-4bf0-ab89-6dfa4fbf755e
2025-06-05 16:01:19,781 - telephony_realtime_bridge - INFO - Buffer state before commit: 1 chunks, 29600 bytes (~925.0ms of audio)
2025-06-05 16:01:19,781 - telephony_realtime_bridge - INFO - realtime_websocket_object: <bound method Connection.send of <websockets.asyncio.client.ClientConnection object at 0x0000025C7AF9B410>>
2025-06-05 16:01:19,782 - telephony_realtime_bridge - INFO - Audio buffer committed with 1 chunks (29600 bytes)
2025-06-05 16:01:19,782 - telephony_realtime_bridge - INFO - Audio buffer commit sent: {"type":"input_audio_buffer.commit","event_id":null}
2025-06-05 16:01:19,782 - telephony_realtime_bridge - INFO - Response creation triggered after audio buffer commit
2025-06-05 16:01:19,782 - multi_turn_test - INFO - [MOCK] Received from bridge: userStream.stopped
2025-06-05 16:01:19,783 - multi_turn_test - INFO - [MOCK] User stream stopped
2025-06-05 16:01:19,926 - telephony_realtime_bridge - INFO - Received OpenAI message type: input_audio_buffer.committed
2025-06-05 16:01:19,927 - telephony_realtime_bridge - INFO - Received OpenAI message type: conversation.item.created
2025-06-05 16:01:19,927 - telephony_realtime_bridge - INFO - Conversation item created
2025-06-05 16:01:19,933 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.created
2025-06-05 16:01:19,933 - telephony_realtime_bridge - INFO - Response event details: {
  "type": "response.created",
  "event_id": "event_BfDsCYNwfankMwNGbniGr",
  "response": {
    "object": "realtime.response",
    "id": "resp_BfDsCv4awXesmbkle7Z52",
    "status": "in_progress",
    "status_details": null,
    "output": [],
    "conversation_id": "conv_BfDrlBNrWFCU1HcoQqgWa",
    "modalities": [
      "audio",
      "text"
    ],
    "voice": "alloy",
    "output_audio_format": "pcm16",
    "temperature": 0.8,
    "max_output_tokens": 4096,
    "usage": null,
    "metadata": null
  }
}
2025-06-05 16:01:19,934 - telephony_realtime_bridge - INFO - Response creation started
2025-06-05 16:01:20,359 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.output_item.added
2025-06-05 16:01:20,359 - telephony_realtime_bridge - INFO - Output item added: {
  "id": "item_BfDsCbEYX7FbwbbJFPgGV",
  "object": "realtime.item",
  "type": "message",
  "status": "in_progress",
  "role": "assistant",
  "content": []
}
2025-06-05 16:01:20,360 - telephony_realtime_bridge - INFO - Output item added: {'id': 'item_BfDsCbEYX7FbwbbJFPgGV', 'object': 'realtime.item', 'type': 'message', 'status': 'in_progress', 'role': 'assistant', 'content': []}
2025-06-05 16:01:20,360 - telephony_realtime_bridge - INFO - Received OpenAI message type: conversation.item.created
2025-06-05 16:01:20,360 - telephony_realtime_bridge - INFO - Conversation item created
2025-06-05 16:01:20,371 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.content_part.added
2025-06-05 16:01:20,372 - telephony_realtime_bridge - INFO - Content part added: {
  "type": "audio",
  "transcript": ""
}
2025-06-05 16:01:20,372 - telephony_realtime_bridge - INFO - Content part added: {'type': 'audio', 'transcript': ''}
2025-06-05 16:01:20,372 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:20,373 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 6
2025-06-05 16:01:20,373 - telephony_realtime_bridge - DEBUG - Received audio transcript delta: You're
2025-06-05 16:01:20,380 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:20,381 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 8
2025-06-05 16:01:20,381 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  welcome
2025-06-05 16:01:20,386 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:20,386 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 1
2025-06-05 16:01:20,387 - telephony_realtime_bridge - DEBUG - Received audio transcript delta: !
2025-06-05 16:01:20,394 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:20,394 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 3
2025-06-05 16:01:20,395 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  If
2025-06-05 16:01:20,526 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-05 16:01:20,526 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 6400
2025-06-05 16:01:20,527 - telephony_realtime_bridge - INFO - Started play stream: 10f5fa60-fc4b-4bc5-8e77-fb3e28b95841
2025-06-05 16:01:20,527 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.start
2025-06-05 16:01:20,528 - multi_turn_test - INFO - [MOCK] Play stream started: 10f5fa60-fc4b-4bc5-8e77-fb3e28b95841
2025-06-05 16:01:20,528 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 2400 -> 1600 samples, 100.0ms -> 100.0ms
2025-06-05 16:01:20,528 - multi_turn_test - INFO - [MOCK] Collecting response audio...
2025-06-05 16:01:20,529 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 6400 bytes)
2025-06-05 16:01:20,530 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-05 16:01:20,530 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (6400 bytes base64)
2025-06-05 16:01:20,568 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:20,568 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 4
2025-06-05 16:01:20,569 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  you
2025-06-05 16:01:20,569 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:20,569 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 5
2025-06-05 16:01:20,570 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  have
2025-06-05 16:01:20,580 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:20,580 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 4
2025-06-05 16:01:20,580 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  any
2025-06-05 16:01:20,582 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:20,582 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 5
2025-06-05 16:01:20,582 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  more
2025-06-05 16:01:20,590 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-05 16:01:20,590 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 9600
2025-06-05 16:01:20,590 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 3600 -> 2400 samples, 150.0ms -> 150.0ms
2025-06-05 16:01:20,591 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 9600 bytes)
2025-06-05 16:01:20,591 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-05 16:01:20,591 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (9600 bytes base64)
2025-06-05 16:01:20,706 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-05 16:01:20,707 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 16000
2025-06-05 16:01:20,708 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 6000 -> 4000 samples, 250.0ms -> 250.0ms
2025-06-05 16:01:20,709 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 16000 bytes)
2025-06-05 16:01:20,709 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-05 16:01:20,710 - telephony_realtime_bridge - INFO - Received OpenAI message type: conversation.item.input_audio_transcription.delta
2025-06-05 16:01:20,710 - telephony_realtime_bridge - DEBUG - Received input audio transcription delta: Thanks, that's all.

2025-06-05 16:01:20,710 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (16000 bytes base64)
2025-06-05 16:01:20,710 - telephony_realtime_bridge - INFO - Received OpenAI message type: conversation.item.input_audio_transcription.completed
2025-06-05 16:01:20,710 - telephony_realtime_bridge - INFO - Full user transcript (input audio): Thanks, that's all.

2025-06-05 16:01:20,711 - call_recorder - INFO - Transcript added: [caller] Thanks, that's all.
...
2025-06-05 16:01:20,711 - telephony_realtime_bridge - INFO - Input audio transcription completed
2025-06-05 16:01:20,746 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:20,746 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 10
2025-06-05 16:01:20,747 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  questions
2025-06-05 16:01:20,753 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:20,753 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 3
2025-06-05 16:01:20,754 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  or
2025-06-05 16:01:20,809 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-05 16:01:20,809 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 16000
2025-06-05 16:01:20,809 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 6000 -> 4000 samples, 250.0ms -> 250.0ms
2025-06-05 16:01:20,809 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 16000 bytes)
2025-06-05 16:01:20,809 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-05 16:01:20,809 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (16000 bytes base64)
2025-06-05 16:01:20,834 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-05 16:01:20,834 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 16000
2025-06-05 16:01:20,835 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 6000 -> 4000 samples, 250.0ms -> 250.0ms
2025-06-05 16:01:20,837 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 16000 bytes)
2025-06-05 16:01:20,837 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-05 16:01:20,837 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (16000 bytes base64)
2025-06-05 16:01:20,912 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:20,912 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 5
2025-06-05 16:01:20,912 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  need
2025-06-05 16:01:20,918 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:20,918 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 8
2025-06-05 16:01:20,919 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  further
2025-06-05 16:01:20,929 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:20,930 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 11
2025-06-05 16:01:20,930 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  assistance
2025-06-05 16:01:20,934 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:20,934 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 1
2025-06-05 16:01:20,934 - telephony_realtime_bridge - DEBUG - Received audio transcript delta: ,
2025-06-05 16:01:20,943 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-05 16:01:20,944 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 16000
2025-06-05 16:01:20,944 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 6000 -> 4000 samples, 250.0ms -> 250.0ms
2025-06-05 16:01:20,946 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 16000 bytes)
2025-06-05 16:01:20,946 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:20,946 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-05 16:01:20,946 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (16000 bytes base64)
2025-06-05 16:01:20,946 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 5
2025-06-05 16:01:20,946 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  feel
2025-06-05 16:01:21,036 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-05 16:01:21,036 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 32000
2025-06-05 16:01:21,036 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 12000 -> 8000 samples, 500.0ms -> 500.0ms
2025-06-05 16:01:21,052 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 32000 bytes)
2025-06-05 16:01:21,052 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-05 16:01:21,052 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (32000 bytes base64)
2025-06-05 16:01:21,229 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-05 16:01:21,229 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 48000
2025-06-05 16:01:21,238 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 18000 -> 12000 samples, 750.0ms -> 750.0ms
2025-06-05 16:01:21,241 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 48000 bytes)
2025-06-05 16:01:21,241 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-05 16:01:21,242 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (48000 bytes base64)
2025-06-05 16:01:21,247 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:21,248 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 5
2025-06-05 16:01:21,248 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  free
2025-06-05 16:01:21,248 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:21,248 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 3
2025-06-05 16:01:21,248 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  to
2025-06-05 16:01:21,257 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:21,257 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 8
2025-06-05 16:01:21,257 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  contact
2025-06-05 16:01:21,271 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:21,271 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 3
2025-06-05 16:01:21,271 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  us
2025-06-05 16:01:21,277 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:21,277 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 1
2025-06-05 16:01:21,278 - telephony_realtime_bridge - DEBUG - Received audio transcript delta: .
2025-06-05 16:01:21,283 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:21,283 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 5
2025-06-05 16:01:21,283 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  Have
2025-06-05 16:01:21,291 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:21,291 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 2
2025-06-05 16:01:21,291 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  a
2025-06-05 16:01:21,302 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:21,303 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 6
2025-06-05 16:01:21,303 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  great
2025-06-05 16:01:21,305 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:21,305 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 4
2025-06-05 16:01:21,305 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  day
2025-06-05 16:01:21,315 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-05 16:01:21,315 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 1
2025-06-05 16:01:21,315 - telephony_realtime_bridge - DEBUG - Received audio transcript delta: !
2025-06-05 16:01:21,450 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-05 16:01:21,450 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 64000
2025-06-05 16:01:21,450 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 24000 -> 16000 samples, 1000.0ms -> 1000.0ms
2025-06-05 16:01:21,464 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 64000 bytes)
2025-06-05 16:01:21,464 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-05 16:01:21,464 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (64000 bytes base64)
2025-06-05 16:01:21,622 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-05 16:01:21,638 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 64000
2025-06-05 16:01:21,638 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 24000 -> 16000 samples, 1000.0ms -> 1000.0ms
2025-06-05 16:01:21,644 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 64000 bytes)
2025-06-05 16:01:21,644 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-05 16:01:21,645 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (64000 bytes base64)
2025-06-05 16:01:21,837 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-05 16:01:21,837 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 64000
2025-06-05 16:01:21,853 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 24000 -> 16000 samples, 1000.0ms -> 1000.0ms
2025-06-05 16:01:21,853 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 64000 bytes)
2025-06-05 16:01:21,853 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-05 16:01:21,859 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (64000 bytes base64)
2025-06-05 16:01:21,991 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-05 16:01:21,991 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 64000
2025-06-05 16:01:21,991 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 24000 -> 16000 samples, 1000.0ms -> 1000.0ms
2025-06-05 16:01:21,991 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 64000 bytes)
2025-06-05 16:01:21,991 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-05 16:01:22,005 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (64000 bytes base64)
2025-06-05 16:01:22,054 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-05 16:01:22,054 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 43864
2025-06-05 16:01:22,054 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 16448 -> 10965 samples, 685.3ms -> 685.3ms
2025-06-05 16:01:22,066 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 43864 bytes)
2025-06-05 16:01:22,066 - telephony_realtime_bridge - INFO - Received OpenAI message type: rate_limits.updated
2025-06-05 16:01:22,066 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-05 16:01:22,067 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (43864 bytes base64)
2025-06-05 16:01:22,077 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.done
2025-06-05 16:01:22,077 - telephony_realtime_bridge - INFO - Audio response completed
2025-06-05 16:01:22,078 - telephony_realtime_bridge - INFO - Stopped play stream: 10f5fa60-fc4b-4bc5-8e77-fb3e28b95841
2025-06-05 16:01:22,078 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.stop
2025-06-05 16:01:22,078 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.done
2025-06-05 16:01:22,078 - telephony_realtime_bridge - INFO - Full AI transcript (output audio): You're welcome! If you have any more questions or need further assistance, feel free to contact us. Have a great day!
2025-06-05 16:01:22,078 - multi_turn_test - INFO - [MOCK] Response collected: 13 chunks
2025-06-05 16:01:22,078 - call_recorder - INFO - Transcript added: [bot] You're welcome! If you have any more questions or ...
2025-06-05 16:01:22,078 - multi_turn_test - INFO - [MOCK] Play stream stopped: 10f5fa60-fc4b-4bc5-8e77-fb3e28b95841
2025-06-05 16:01:22,078 - telephony_realtime_bridge - INFO - Audio transcript completed
2025-06-05 16:01:22,078 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.content_part.done
2025-06-05 16:01:22,079 - telephony_realtime_bridge - INFO - Content part completed
2025-06-05 16:01:22,079 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.output_item.done
2025-06-05 16:01:22,079 - telephony_realtime_bridge - INFO - Output item completed
2025-06-05 16:01:22,082 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.done
2025-06-05 16:01:22,082 - telephony_realtime_bridge - INFO - Response event details: {
  "type": "response.done",
  "event_id": "event_BfDsEBMymqlOoWWaBYfyQ",
  "response": {
    "object": "realtime.response",
    "id": "resp_BfDsCv4awXesmbkle7Z52",
    "status": "completed",
    "status_details": null,
    "output": [
      {
        "id": "item_BfDsCbEYX7FbwbbJFPgGV",
        "object": "realtime.item",
        "type": "message",
        "status": "completed",
        "role": "assistant",
        "content": [
          {
            "type": "audio",
            "transcript": "You're welcome! If you have any more questions or need further assistance, feel free to contact us. Have a great day!"
          }
        ]
      }
    ],
    "conversation_id": "conv_BfDrlBNrWFCU1HcoQqgWa",
    "modalities": [
      "audio",
      "text"
    ],
    "voice": "alloy",
    "output_audio_format": "pcm16",
    "temperature": 0.8,
    "max_output_tokens": 4096,
    "usage": {
      "total_tokens": 2275,
      "input_tokens": 2092,
      "output_tokens": 183,
      "input_token_details": {
        "text_tokens": 1249,
        "audio_tokens": 843,
        "cached_tokens": 1984,
        "cached_tokens_details": {
          "text_tokens": 1216,
          "audio_tokens": 768
        }
      },
      "output_token_details": {
        "text_tokens": 41,
        "audio_tokens": 142
      }
    },
    "metadata": null
  }
}
2025-06-05 16:01:22,110 - multi_turn_test - INFO - [MOCK] Response received: 13 chunks
2025-06-05 16:01:22,110 - multi_turn_test - INFO - [MOCK] Turn 5: AI response received (13 chunks)
2025-06-05 16:01:22,110 - multi_turn_test - INFO - [MOCK] Saved audio: turn_05_response_8494a38b.wav (10.78s)
2025-06-05 16:01:22,110 - multi_turn_test - INFO - 
[MOCK] Multi-turn conversation completed:
2025-06-05 16:01:22,110 - multi_turn_test - INFO -    Completed turns: 5/5
2025-06-05 16:01:22,110 - multi_turn_test - INFO - [MOCK] Sent session.end: ReplacementCardConversation completed
2025-06-05 16:01:22,110 - telephony_realtime_bridge - INFO - Received telephony message: session.end
2025-06-05 16:01:22,110 - telephony_realtime_bridge - INFO - Session end received: ReplacementCardConversation completed
2025-06-05 16:01:22,116 - multi_turn_test - INFO - [MOCK] Saved audio: greeting_8494a38b.wav (2.83s)
2025-06-05 16:01:22,116 - call_recorder - INFO - Transcript saved: call_recordings\8494a38b-64e6-4bf0-ab89-6dfa4fbf755e_20250605_160053\transcript.json
2025-06-05 16:01:22,117 - call_recorder - INFO - Metadata saved: call_recordings\8494a38b-64e6-4bf0-ab89-6dfa4fbf755e_20250605_160053\call_metadata.json
2025-06-05 16:01:22,118 - call_recorder - INFO - Session events saved: call_recordings\8494a38b-64e6-4bf0-ab89-6dfa4fbf755e_20250605_160053\session_events.json
2025-06-05 16:01:22,118 - multi_turn_test - INFO - [MOCK] Saved audio: response_8494a38b.wav (10.78s)
2025-06-05 16:01:22,119 - multi_turn_test - INFO - 
==================================================
2025-06-05 16:01:22,119 - multi_turn_test - INFO - [MOCK] MULTI-TURN CONVERSATION SUMMARY
2025-06-05 16:01:22,119 - multi_turn_test - INFO - ==================================================
2025-06-05 16:01:22,119 - multi_turn_test - INFO - Overall Status: SUCCESS
2025-06-05 16:01:22,120 - multi_turn_test - INFO - Completed Turns: 5/5
2025-06-05 16:01:22,120 - multi_turn_test - INFO - Initial Greeting: Received (7 chunks)
2025-06-05 16:01:22,120 - multi_turn_test - INFO - 
Turn-by-turn Results:
2025-06-05 16:01:22,121 - multi_turn_test - INFO -   Turn 1: need_to_replace_card.wav → Audio Sent → Response Received (14 chunks)
2025-06-05 16:01:22,121 - multi_turn_test - INFO -   Turn 2: my_gold_card.wav → Audio Sent → Response Received (14 chunks)
2025-06-05 16:01:22,121 - multi_turn_test - INFO -   Turn 3: i_lost_it.wav → Audio Sent → Response Received (14 chunks)
2025-06-05 16:01:22,122 - multi_turn_test - INFO -   Turn 4: yes_that_address.wav → Audio Sent → Response Received (17 chunks)
2025-06-05 16:01:22,123 - multi_turn_test - INFO -   Turn 5: thanks_thats_all.wav → Audio Sent → Response Received (13 chunks)
2025-06-05 16:01:22,123 - call_recorder - INFO - Final stereo recording created: call_recordings\8494a38b-64e6-4bf0-ab89-6dfa4fbf755e_20250605_160053\final_stereo_recording.wav (47.91s)
2025-06-05 16:01:22,123 - call_recorder - INFO - Audio resampling applied - Bot audio resampled from 24000Hz to 16000Hz
2025-06-05 16:01:22,123 - multi_turn_test - INFO - ==================================================
2025-06-05 16:01:22,123 - multi_turn_test - INFO - 
[TEST] ReplacementCardConversation completed successfully!
2025-06-05 16:01:22,123 - call_recorder - INFO - Recording stopped and finalized for conversation 8494a38b-64e6-4bf0-ab89-6dfa4fbf755e
2025-06-05 16:01:22,123 - telephony_realtime_bridge - INFO - Call recording finalized: {'conversation_id': '8494a38b-64e6-4bf0-ab89-6dfa4fbf755e', 'session_id': '8494a38b-64e6-4bf0-ab89-6dfa4fbf755e', 'recording_dir': 'call_recordings\\8494a38b-64e6-4bf0-ab89-6dfa4fbf755e_20250605_160053', 'recording_active': False, 'finalized': True, 'files': {'caller_audio': 'call_recordings\\8494a38b-64e6-4bf0-ab89-6dfa4fbf755e_20250605_160053\\caller_audio.wav', 'bot_audio': 'call_recordings\\8494a38b-64e6-4bf0-ab89-6dfa4fbf755e_20250605_160053\\bot_audio.wav', 'stereo_audio': 'call_recordings\\8494a38b-64e6-4bf0-ab89-6dfa4fbf755e_20250605_160053\\stereo_recording.wav', 'transcript': 'call_recordings\\8494a38b-64e6-4bf0-ab89-6dfa4fbf755e_20250605_160053\\transcript.json', 'metadata': 'call_recordings\\8494a38b-64e6-4bf0-ab89-6dfa4fbf755e_20250605_160053\\call_metadata.json', 'session_events': 'call_recordings\\8494a38b-64e6-4bf0-ab89-6dfa4fbf755e_20250605_160053\\session_events.json'}, 'stats': {'conversation_id': '8494a38b-64e6-4bf0-ab89-6dfa4fbf755e', 'session_id': '8494a38b-64e6-4bf0-ab89-6dfa4fbf755e', 'start_time': '2025-06-05T23:00:53.005015+00:00', 'end_time': '2025-06-05T23:01:22.110269+00:00', 'duration_seconds': 29.105254, 'caller_audio_chunks': 8, 'bot_audio_chunks': 79, 'caller_audio_bytes': 184800, 'bot_audio_bytes': 1533180, 'caller_audio_duration_seconds': 5.775, 'bot_audio_duration_seconds': 47.911875, 'transcript_entries': 10, 'function_calls': [{'timestamp': '2025-06-05T23:00:57.706450+00:00', 'function_name': 'call_intent', 'arguments': {'intent': 'card_replacement'}, 'result': {'status': 'success', 'intent': 'card_replacement', 'next_action': 'ask_card_type', 'available_cards': ['Gold card', 'Silver card', 'Basic card'], 'prompt_guidance': 'Ask the customer which type of card they need to replace: Gold card, Silver card, or Basic card.'}, 'call_id': 'call_3M24BIqoLlYjRrpK'}, {'timestamp': '2025-06-05T23:01:08.565353+00:00', 'function_name': 'replacement_reason', 'arguments': {'card_in_context': 'Gold card', 'reason': 'Lost'}, 'result': {'status': 'success', 'function_name': 'replacement_reason', 'prompt_guidance': '\nThe customer wants to replace their Gold card. We need the reason they \nwant to replace their card.\n\nBased on their response, call the `replacement_reason` function with the reason.\n\nLost\nDamaged\nStolen\nOther\n', 'next_action': 'collect_address', 'valid_reasons': ['Lost', 'Damaged', 'Stolen', 'Other'], 'selected_reason': 'Lost', 'context': {'stage': 'reason_collection', 'card_in_context': 'Gold card', 'reason': 'Lost'}}, 'call_id': 'call_JSgVzUJf0BSJp1PO'}, {'timestamp': '2025-06-05T23:01:14.197028+00:00', 'function_name': 'confirm_address', 'arguments': {'card_in_context': 'Gold card', 'address_on_file': '[Your Current Address]'}, 'result': {'status': 'success', 'function_name': 'confirm_address', 'prompt_guidance': '\nThe customer wants to replace their Gold card. We need the address to mail the new card.\nThe address on file with this card is: [Your Current Address].\n\nCall the `confirm_address` function with the confirmed address.\n', 'next_action': 'confirm_address', 'address_on_file': '[Your Current Address]', 'confirmed_address': '', 'context': {'stage': 'address_confirmation', 'card_in_context': 'Gold card', 'address_on_file': '[Your Current Address]', 'confirmed_address': ''}}, 'call_id': 'call_2ArrQCtVQ4XJXYcf'}]}}
2025-06-05 16:01:22,124 - multi_turn_test - INFO - [MOCK] Disconnected from bridge server
2025-06-05 16:01:22,125 - multi_turn_test - INFO - [MAIN] Replacement card conversation flow completed: True
2025-06-05 16:01:22,191 - telephony_realtime_bridge - INFO - Telephony-Realtime bridge closed
2025-06-05 16:01:22,191 - main - INFO - Closing bridge...
2025-06-05 16:04:01,584 - call_recorder - INFO - Logging configured
2025-06-05 16:04:01,584 - telephony_realtime_bridge - INFO - Logging configured
2025-06-05 16:04:03,518 - twilio_realtime_bridge - INFO - Logging configured
